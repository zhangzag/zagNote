!function(l){Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var t="http://192.168.2.254:8080/AKGW-api/v1",e=(new Date).Format("yyyy-MM-dd hh:mm:ss"),n=(new Date).Format("yyyy-MM-dd"),i=function r(){for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var n=t[e].split("=");if("memberId"==n[0]&&"null"!=n[1])return unescape(n[1])}}();jQuery.extend({getGlobalVal:function(){return{webRoot:t,webOrigin:"http://113.108.163.210:9999",curDate:e,curDay:n,memberId:i,ImgSrc:"http://192.168.2.250:8081"}},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},priceFilter:function(t){return null!==t&&0!==t&&t?"¥"+t.toFixed(2):"¥"+(0).toFixed(2)},orderStatuFilter:function(t){return 1==t||9==t?"待付款":3==t||2==t?"待发货":4==t?"待收货":5==t||6==t||7==t?"已完成":8==t?"已取消":void 0},payType:function(t){return 1===t?"支付宝支付 ":2===t?"微信支付":3===t?"通联支付":"货到付款"},iconProImg:function(t){return 1===t?'<i class="y_type"></i>':2===t?'<i class="y_type otc_1"></i>':3===t?'<i class="y_type otc_2"></i>':""},showToast:function(t,e){alert(t)},imgType:function(t){return 1==t?"RX":2==t?"OTC-2":3==t?"OTC-1":void 0},comConfirm:function(t){var e=t.tipText||"提示",n=t.conText||"确定执行此操作？",i=t.cancelText||"取消",o=t.confirmText||"确定",r=t.cancel||null,a=t.conform||null;l("body").append('<div id="loginLayer_wrap">\t\t\t\t<div class="loginLayer">\t\t\t\t\t<div class="loginLayerTip"><span class="fl">'+e+'</span><i  class="fr">x</i></div>\t\t\t\t\t<div class="loginLayerCon">\t\t\t\t\t\t<p>'+n+'</p>\t\t\t\t\t</div>\t\t\t\t\t<div class="loginLayerBtns">\t\t\t\t\t\t<button class="loginLayerCancel fl">'+i+'</button>\t\t\t\t\t\t<button class="loginLayerConfirm fr">'+o+"</button>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>"),"function"==typeof r&&l("#loginLayer_wrap").on("click",".loginLayerCancel",function(t){t.preventDefault(),r()}),"function"==typeof a&&l("#loginLayer_wrap").on("click",".loginLayerConfirm",function(t){t.preventDefault(),a()})},finishTips:function(t,e){t=t||"提示",e=e||"操作提示";layui.use("layer",function(){layui.layer.open({title:t,content:e,area:"260px",zIndex:99999999999})})},tips:function(t,e){t=t||"",e=e||1;layui.use("layer",function(){layui.layer.msg(t,{icon:e,time:1e3,zIndex:999999999999})})},authorization:function(t){var e=CryptoJS.SHA256(t+"akjk");l.ajaxSetup({headers:{Authorization:e.toString(CryptoJS.enc.Base64)}})},loginAlert:function(i){l("body").append('<div id="loginAlert222" class="alertWrap"><div class="alertContent"><div class="alertTop"><span>会员登录</span><b>X</b><i class="clear"></i></div><div id="loginAlert"><input type="text" id="loginUser" placeholder="请输入手机号"><input type="password" id="loginPass" placeholder="请输入密码" autocomplete="new-password"><button id="loginAlertClick">登 录</button><div><a href="/register.html">没有账号？ <span>去注册 ></span></a><a href="/forgetPassword.html" style="float: right;">忘记密码？</a></div></div></div></div>'),l("body").off("click","#loginAlert222 b").on("click","#loginAlert222 b",function(){l("body").find("#loginAlert222").remove()}),l("body").off("click","#loginAlertClick").on("click","#loginAlertClick",function(t){t.preventDefault();var e=l.trim(l("#loginUser").val()),n=l.trim(l("#loginPass").val());return""==e||""==n?(l.tips("账号和密码不能为空！",2),!1):/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(e)?void l.ajax({url:"/login",type:"POST",dataType:"json",data:{username:e,password:n}}).done(function(t){if(!0===t.success){var e=window.location.host;if(e=-1==e.indexOf(".ak1ak1.com")?"":".ak1ak1.com",l.cookie("memberId",JSON.stringify(t.memberID),{expires:7,path:"/",domain:e}),l("body").find("#loginAlert222").remove(),l.tips("欢迎来到阿康健康！",1),l.authorization(t.memberID),!i)return!1;i.getColl&&i.getColl(t.memberID),i.getdefault&&i.getdefault(t.memberID)}else l.tips("账号或者密码错误！",2)}):(l.tips("手机格式不正确，请重新输入",2),!1)})}});var o=CryptoJS.SHA256(i+"akjk");l.ajaxSetup({url:t,type:"POST",dataType:"json",cache:!0,headers:{Authorization:o.toString(CryptoJS.enc.Base64)},error:function(t,e,n){500==t.status&&(console.log("出错["+t.status+"]："+n+":::"+t.responseText),"请先登录！"===JSON.parse(t.responseText).msg&&console.log("请先登录！")),404==t.status&&console.log("出错["+t.status+"]："+n+":::"+t.responseText)}})}(jQuery);