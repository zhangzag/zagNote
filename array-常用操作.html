<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	


<script>
	let arr = [];

	/*
	*检测数组
	*/
	console.log( Array.isArray( arr ) )
	console.log( arr instanceof Array )
	console.log( arr.constructor === Array )
	console.log( Object.prototype.toString.call(arr) )

	/*
	*常用方法
	*/
	
	//1.合并多个数组，返回合并后的新数组，原数组没有变化。
	const a1 = [1, 2].concat(['a', 'b'], ['name'])
	console.log(a1)

	//2.检测数组中的每一个元素是否都通过了callback测试，全部通过返回true，否则返回false。
	const a2 = [1, 3, 6];
	let t2 = a2.every((item, index, array)=>{//item:当前元素值；index：当前元素下标； array:当前数组
		return item<7;//必须返回true或者false告知every是否通过测试
	});
	console.log(t2)

	//3.过滤数组。返回一个新数组，包含通过callback函数测试的所有元素。
	let a3 = [2, 5, 9];
	let t3 = a3.filter((item, index, array)=>{
		return item<4;// callback函数必须返回true或者false，返回true保留该元素，false则不保留。
	});
	console.log(t3)

	//4.返回通过callback函数测试的第一个元素，否则返回undefined，callback函数定义同上。
	let a4 = [1,2,3,2,7,8]
	let t4 = a4.find((item, index, array)=>{
		return item==7;
	})
	console.log(t4)

	//5.返回通过callback函数测试的第一个元素的索引，否则返回-1，callback函数定义同上。
	let a5 = [8, 9, 6, 5, 9]
	let t5 = a5.findIndex((item)=>{
		return item==5
	})
	console.log(t5)

	//6.includes() 方法用来判断一个数组是否包含一个指定的值，返回 true或 false。searchElement：要查找的元素；fromIndex：开始查找的索引位置 array.includes(searchElement, fromIndex)
	let a6 = [1, 2, 3];
	let t6 = a6.includes(2, 2);
	console.log(t6)

	//7.返回在数组中可以找到一个给定元素的第一个索引，如果不存在，则返回-1。searchElement：要查找的元素；fromIndex：开始查找的索引位置。 array.indexOf(searchElement[, fromIndex = 0])
	let a7 = [2, 9, 7, 8, 9];
	let t7 = a7.indexOf(7)
	console.log(t7)

	//8.将数组中的元素通过separator连接成字符串，并返回该字符串，separator默认为","。 array.join(separator=',')
	let a8 = [1, 2, 3]
	let t8 = a8.join(';')
	console.log(t8)

	//9.返回一个新数组，新数组中的每个元素都是调用callback函数后返回的结果。注意：如果没有return值，则新数组会插入一个undefined值。array.map由于不具有过滤的功能，因此array调用map函数时，如果array中的数据并不是每一个都会return，则必须先filter，然后再map，即map调用时必须是对数组中的每一个元素都有效。 array.map(callback[, thisArg]);
	let a9 = [{name: 'aa', age: 18}, {name: 'bb', age: 20}];
	let t9 = a9.map((item)=>{
		item.name='test_'+item.name
		return item
	})
	console.log(t9)

	//10.array.pop() 与 array.shift();
	//pop为从数组中删除最后一个元素，并返回最后一个元素的值，原数组的最后一个元素被删除。数组为空时返回undefined。
	console.log([1, 2, 3].pop())
	//shift删除数组的第一个元素，并返回第一个元素，原数组的第一个元素被删除。数组为空返回undefined。
	console.log(['one', 'two', 'three'].shift())

	//11.array.push(element1, element2, ....elementN) 与 array.unshift(element1, element2, ...elementN);
	//push是将一个或多个元素添加到数组的末尾，并返回新数组的长度; unshift将一个或多个元素添加到数组的开头，并返回新数组的长度。唯一的区别就是插入的位置不同。
	
	//12.array.reduce(callback[, initialValue]);
	//对数组中的每个元素（从左到右）执行callback函数累加，将其减少为单个值。
	const total = [0, 1, 2, 3].reduce((sum, value) => {
	  return sum + value;
	}, 0);
	console.log(total)
	const flattened = [[0, 1], [2, 3], [4, 5]].reduce((a, b) => {
	  return a.concat(b);
	}, []);
	console.log(flattened)

	//13.将数组中元素的位置颠倒。 array.reverse();
	console.log(['one', 'two', 'three'].reverse())

	//14.返回一个新数组，包含原数组从begin 到 end(不包含end)索引位置的所有元素。 array.slice(begin, end)
	console.log(['zero', 'one', 'two', 'three'].slice(1, 3))

	//15.判断数组中是否包含可以通过callback测试的元素，与every不同的是，这里只要某一个元素通过测试，即返回true。callback定义同上。 array.some(callback[, thisArg]);
	console.log( [2, 5, 8, 1, 4].some(item => item > 6) )

	//16.对数组中的元素进行排序，compareFunction不存在时，元素按照转换为的字符串的诸个字符的Unicode位点进行排序，慎用！请使用时一定要加compareFunction函数，而且该排序是不稳定的。
	let t16 = [1, 8, 5].sort((a, b) => {
	  return a-b; // 从小到大排序
	});
	console.log(t16)

	//17.array.splice(start[, deleteCount, item1, item2, ...]);
	//通过删除现有元素和/或添加新元素来更改一个数组的内容。start:指定修改的开始位置；deleteCount：从 start位置开始要删除的元素个数；item...：要添加进数组的元素,从start 位置开始。返回值是由被删除的元素组成的一个数组。如果只删除了一个元素，则返回只包含一个元素的数组。如果没有删除元素，则返回空数组。如果 deleteCount 大于start 之后的元素的总数，则从 start 后面的元素都将被删除（含第 start 位）。
	const myFish = ['angel', 'clown', 'mandarin', 'sturgeon'];

	const deleted = myFish.splice(2, 0, 'drum'); // 在索引为2的位置插入'drum'
	// myFish 变为 ["angel", "clown", "drum", "mandarin", "sturgeon"]，deleted为[]
	console.log(myFish, deleted)


	//小结
	//push、 shift、 pop、 unshift、 reverse、 sort、 splice方法会对原来的数组进行修改，其他的数组操作方法只有返回值不同，对原数组都没有影响，即原数组不变。
	
	//产生一个数组，值为5个undefined
	console.log( Array.apply(null, {length: 5}) )
</script>


<script>
	// 数组去重
	
	let arrs = [1,1,'true','true',true,true,15,15,false,false, undefined,undefined, null,null, NaN, NaN,'NaN', 0, 0, 'a', 'a',{},{}];
	
	//1.es6最常用 - set (无法去除空对象 "{}")
	function clearRepeat (arr){
		let newArr = new Set(arr)

		return Array.from( newArr );
	}

	let arrs1 = [1,1,'true','true',true,true,15,15,false,false, undefined,undefined, null,null, NaN, NaN,'NaN', 0, 0, 'a', 'a',{},{}];
	console.log( 'cl1: ', clearRepeat(arrs1) )

	//2.es5最常用 - for循环搭配 splice (NaN和{}没有去重，两个null直接消失了)
	function cl2 (arr){
		if( !(arr instanceof Array) ){
			console.log('参数不是数组')
			return false;
		}

		for( var i=0; i<arr.length; i++ ){
			for( var j=i+1; j<arr.length; j++ ){
				if( arr[i] == arr[j] ){
					arr.splice(j, 1)
					j--;
				}
			}
		}
		return arr
	}
	let arrs2 = [1,1,'true','true',true,true,15,15,false,false, undefined,undefined, null,null, NaN, NaN,'NaN', 0, 0, 'a', 'a',{},{}];
	console.log( 'cl2: ', cl2(arrs2) )

	//3.利用indexOf
	function cl3(arr){
		if( !Array.isArray(arr) ){
			console.log('参数不是数组')
			return
		}

		var newArrs = [];
		for( let val of arr ){
			if( newArrs.indexOf(val) === -1 ){
				newArrs.push( val )
			}
		}
		return newArrs
	}
	let arrs3 = [1,1,'true','true',true,true,15,15,false,false, undefined,undefined, null,null, NaN, NaN,'NaN', 0, 0, 'a', 'a',{},{}];
	console.log( 'cl3: ', cl3(arrs3) )

	//利用includes
	function cl4 (arr){
		if( !Array.isArray(arr) ){
			console.log('参数不是数组')
			return
		}

		var newArrs = [];
		for( let val of arr ){
			if( !newArrs.includes(val) ){
				newArrs.push(val)
			}
		}
		return newArrs
	}
	let arrs4 = [1,1,'true','true',true,true,15,15,false,false, undefined,undefined, null,null, NaN, NaN,'NaN', 0, 0, 'a', 'a',{},{}];
	console.log( 'cl4: ', cl4(arrs4) )

	//hasOwnProperty
	function cl5(arr) {
	    let obj = {};

	    return arr.filter(function(item, index, arr){
	        return obj.hasOwnProperty(typeof item + item) ? false : (obj[typeof item + item] = true)
	    })
	}
	let arrs5 = [1,1,'true','true',true,true,15,15,false,false, undefined,undefined, null,null, NaN, NaN,'NaN', 0, 0, 'a', 'a',{},{}];
	console.log( 'cl5: ', cl5(arrs5) )

	//map
	function arrayNonRepeatfy(arr) {
	    let map = new Map();
	    let array = new Array();  // 数组用于返回结果
	    for (let i = 0; i < arr.length; i++) {
	        if(map .has(arr[i])) {  // 如果有该key值
	            map .set(arr[i], true); 
	        } else { 
	            map .set(arr[i], false);   // 如果没有该key值
	            array .push(arr[i]);
	        }
	    } 
	    return array ;
	}
	
	function func(){
	  var a = 1,b = 2;
	  
	  function closure(){
	    return a+b;
	  }
	  return closure;
	}

	function func (){
		var x = 1;
		
		x = x * 2
		return function (){
			return x;
		}
	}

	let a = func();
	console.log(555, a())
</script>
</body>
</html>