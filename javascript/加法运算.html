<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>javascript - 加法运算</title>
</head>
<body>
	
<script>
	// string + string = string (concatenation) 
	var result1 = "Hello, " + "World!"; 
	console.log(result1); // "Hello, World!"

	// number + number = number (addition) 
	var result2 = 10 + 5; 
	console.log(result2);

	/*
	*	javascript通过操作符转换类型
		1.如果操作符中有一个对象，它将转换为原始值（string、number、boolean）
		2.如果操作符中有一个字符串，第二个字符串将转换成字符串，并且连接在一起组成一个字符串
		3.在其他情况下，两个操作数转换成数字并执行加法运算

	*	对象转换的规则：
		如果对象类型是一个Date，可以使用toString()方法
		在其它情况下使用valueOf()方法，它将返回一个原始值
		如果valueOf()方法不能将它返回一个原始值，可以使用toString()方法。而这种情况大部分情况下都会发生

		如果两个操作数是原始类型，那么操作符将会作检查，如果至少一个操作数是字符串的话，将会把它们当字符串连接在一起。在其它情况之下，只会把操作数当作数字，并且做加法运算。著作权归作者所有。
	*/

	// 示例1: 数字和字符串
	var result3 = 1 + "5"; //"15"
	console.log(result3);
// 	1 + "5"：根据规则2，第二个操作数是一个字符串，那么数字1将会变成字符串"1"
// 	"1" + "5": 字符串连接
// 	"15"
// 	第二个操作数是一个字符串。第一个操作数把number转换成string，然后将它们连接在一起


	// 示例2： 数字和数组
	var result4 = [1,3,5] + 1; // "1,3,51"
	console.log(result4);
	// [1,3,5] + 1: 根据规则一，数组[1,3,5]将原始值转换出来"1,3,5"
	// "1,3,5" + 1: 根据规则二，数字1将会转换成字符串"1"
	// "1,3,5" + "1": 字符串连接
	// 1,3,51
	// 第一个操作数是一个数组array，它将值转换为字符串，第二个操作数是数字，它将值转换为字符串，然后将两个字符串连接在一起。

	// 示例3： 数字和布尔值
	var result5 = 10 + true; // 11
	console.log(result5);
	// 10 + true: 根据规则三，布尔值true将转换为数字1
	// 10 + 1: 数字做加法运算
	// 11
	// 因为两个操作数都不是字符串，布尔值将转换为数字符，然后作数字加法运算。

	// 示列4：数字和对象
	var result6 = 15 + {};//"15[object Object]"著作权归作者所有。
	console.log(result6);
	// 15 + {}: 第二个操作数是一个对象，根据规则一和对象转换为字符串[object Object]
	// 15 + "[object Object]": 根据规则二，数字15转换为字符串"15"
	// "15" + "[object Object]": 字符串连接
	// "15[object Object]"
	// 第二个操作数是一个对象，它将转换为一个字符串。因为valueOf()方法返回的是对象本身，而不是一个原始值，使用toString()方法，它返回的是一个字符串。
	// 第二个操作数转换之后是一个字符串，此时数字也将转换为一个字符串，然后两个操作数做字符串连接。

	// 示例5： 数字和null
	var result7 = 8 + null; //8
	console.log(result7);
	// 8 + null: 因为操作数没有字符串，根据规则三，null将转换为数字0
	// 8 + 0: 两个数字做加法运算
	// 8
	// 如果操作数不是对象或字符串时，null将转换为数字，然后做数字的加法运算。

	// 示例6: 字符串和null
	var result = "queen" + null; // "queennull"著作权归作者所有。
	// "queen" + null: 因为第一个操作数是一个字符串，根据规则二，null将转换为一个字符串"null"
	// "queen" + "null": 字符串连接
	// "queennull"
	// 因为第一个操作数是一个字符串，所以null将转换为一个字符串"null"，然后两个操作数做字符串连接。

	// 数字和undefined
	var result = 12 + undefined; // NaN著作权归作者所有。
	// 12 + undefined: 因为没有任何一个操作数是字符串，根据规则三,undefined将转换为一个数字NaN
	// 12 + NaN: 做数字加法运算
	// NaN
	// 因为没有操作数是对象或字符串，undefined将转换为NaN。两个数字做加法运算，因为任何一个数字和NaN做加法运算，其值都等于NaN




	// 总结
	// 为了避免潜在的问题，不在对旬上直接使用加法操作符，除非明确使用toString()或valueOf()方法。

	var arr = [1]
	var obj = {
		toString: function (){return 2},
		valueOf: function (){return 3},
		value: 4
	}
	var res = arr + obj
	// "1" + 2 (obj.toString=>2)
	//12
	console.log(res);
</script>

</body>
</html>