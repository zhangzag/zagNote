webpackJsonp([15],{"+Dg/":function(t,a){},N2Ln:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("3cXf"),s=e.n(r),o=e("wSez"),c=e("AG0B"),i=e("AEmT"),n={name:"myinfo",data:function(){return{isUnscRollable:!1,backParentPage:!1,searchCon:"",hotSear:"",historyList:localStorage.searchhistorelist?JSON.parse(localStorage.searchhistorelist):"",hotSearchs:[]}},props:[],components:{"mt-header":o.Header,"mt-button":o.Button,"mt-badge":o.Badge,comFoot:i.a,comHeaderTitle:c.a},created:function(){var t=this,a=this.$route.query.hotByIdTwo||"",e=this.$route.query.hotByIdOne||"",r=a||e;this.$ajax({url:t.webRoot+"/getHotSearchByProductTypeID",data:{endDate:t._global.curDate,productTypeID:r,type:"",isValid:1}}).then(function(a){var e=a.data.data;if(a.data.success&&e.length>0)for(var r=0;r<e.length;r++)3===e[r].type&&t.$ajax({url:t.webRoot+"/getHSDetailByParams",data:{endDate:t._global.curDate,searchID:e[r].searchID,type:e[r].type,isValid:1}}).then(function(a){if(a.data.success&&a.data.data.length>0)for(var e=0;e<a.data.data.length;e++)a.data.data[e].dataType=3,t.hotSearchs.push(a.data.data[e])}),1===e[r].type&&t.$ajax({url:t.webRoot+"/getHSDetailByParams",data:{endDate:t._global.curDate,searchID:e[r].searchID,type:e[r].type,isValid:1}}).then(function(a){if(a.data.success&&a.data.data.length>0)for(var e=0;e<a.data.data.length;e++)a.data.data[e].dataType=1,t.hotSearchs.push(a.data.data[e])}),2===e[r].type&&t.$ajax({url:t.webRoot+"/getHSDetailByParams",data:{endDate:t._global.curDate,searchID:e[r].searchID,type:e[r].type,isValid:1}}).then(function(a){if(a.data.success&&a.data.data.length>0)for(var e=0;e<a.data.data.length;e++)a.data.data[e].dataType=2,t.hotSearchs.push(a.data.data[e])})}).catch(function(t){console.log(t)})},mounted:function(){this.$emit("changeClass",!1)},updated:function(){this.$nextTick(function(){this.backParentPage||(this.isUnscRollable=!0)})},destroyed:function(){this.$emit("changeClass",!0)},methods:{searchTextFilter:function(t){return t?1===t.dataType?t.productTypeName:2===t.dataType?t.productName:t.brandName:""},changeClassOne:function(t){t?(this.backParentPage=!0,this.isUnscRollable=!1):(this.backParentPage=!1,this.isUnscRollable=!0)},jumpSearch:function(t,a,e){var r=this,o=[];return"topSearch"==t&&this.searchCon&&(localStorage.searchhistorelist?((o=JSON.parse(localStorage.searchhistorelist)).forEach(function(t,a,e){t==r.searchCon&&o.splice(a,1)}),o.length>20&&o.splice(0,1),o.unshift(this.searchCon),localStorage.searchhistorelist=s()(o)):(o.unshift(this.searchCon),localStorage.searchhistorelist=s()(o))),"hotSearch"==t?(1===a.dataType?2===a.level?this.$router.replace({path:"product",query:{ptId:a.productTypeId}}):this.$router.replace({path:"product",query:{ptIdOne:a.productTypeId}}):2===a.dataType?this.$router.replace({path:"product/product_detail",query:{proid:a.productID}}):this.$router.replace({path:"product",query:{searchCon:a.brandName}}),!1):"historySearch"==t?(this.$router.replace({path:"product",query:{searchCon:a}}),!1):void this.$router.replace({path:"product",query:{searchCon:this.searchCon}})},clearHistory:function(){this.historyList=[],localStorage.searchhistorelist=""}}},h={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"wrap has_header_wrap search_wrap"},[e("section",{staticClass:"wrap_in",class:{unscrollable:t.isUnscRollable}},[e("com-header",{attrs:{titles:"搜索"}},[e("template",{slot:"style-def"})],2),t._v(" "),e("div",{staticClass:"search_from"},[e("form",{staticClass:"d_flex",attrs:{action:"javascript:;"}},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchCon,expression:"searchCon",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入搜索关键字"},domProps:{value:t.searchCon},on:{input:function(a){a.target.composing||(t.searchCon=a.target.value.trim())},blur:function(a){t.$forceUpdate()}}}),t._v(" "),e("button",{on:{click:function(a){t.jumpSearch("topSearch")}}},[t._v("搜索")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hotSearchs.length,expression:"hotSearchs.length"}],staticClass:"hot_search"},[t._m(0),t._v(" "),e("div",{staticClass:"lists"},t._l(t.hotSearchs,function(a,r){return e("a",{attrs:{href:"javscript:;"},on:{click:function(e){t.jumpSearch("hotSearch",a,r)}}},[t._v(t._s(t.searchTextFilter(a)))])}))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.historyList.length>0,expression:"historyList.length>0"}],staticClass:"hot_search history_search"},[e("div",{staticClass:"border_h"},[e("span",[t._v("历史搜索")]),t._v(" "),e("button",{on:{click:t.clearHistory}},[t._v("清除历史记录")])]),t._v(" "),e("div",{staticClass:"lists"},t._l(t.historyList,function(a,r){return e("a",{attrs:{href:"javscript:;"},on:{click:function(e){t.jumpSearch("historySearch",a,r)}}},[t._v(t._s(a))])}))])],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"border_h"},[a("span",[this._v("热门搜索")])])}]};var l=e("vSla")(n,h,!1,function(t){e("+Dg/")},"data-v-f60bdddc",null);a.default=l.exports}});
//# sourceMappingURL=15.485c387d569eba730ad0.js.map