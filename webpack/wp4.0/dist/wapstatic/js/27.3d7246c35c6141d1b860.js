webpackJsonp([27],{FiL7:function(t,e){},WngW:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,i=o("a3Yh"),a=o.n(i),n=o("3cXf"),c=o.n(n),l=o("AG0B"),r=(o("AEmT"),o("wSez")),d=(s={name:"info",data:function(){return{flag:!1,showBtnDelect:!1,editHtml:"编辑",list:[],page:1,loading:!1,showLoadAnimate:!1,chooseArr:[]}},components:{comHeaderTitle:l.a,"mt-checklist":r.Checklist,"mt-button":r.Button,Toast:r.Toast,"mt-spinner":r.Spinner},filters:{},watch:{chooseArr:function(){var t=document.getElementById("chooseAll");return this.chooseArr.length==this.list.length?(t.checked=!0,!0):(t.checked=!1,!0)}},computed:{isNothing:function(){return this.$data.list.length>0?this.$data.list.length:""}}},a()(s,"filters",{priceFilter:function(t){return"￥"+Number(t).toFixed(2)}}),a()(s,"created",function(){}),a()(s,"mounted",function(){this.$emit("changeClass",!1)}),a()(s,"destroyed",function(){this.$emit("changeClass",!0)}),a()(s,"methods",{loadMore:function(){var t=this,e=this;this.loading=!0,this.showLoadAnimate=!0,setTimeout(function(){t.$ajax({url:e.webRoot+"/favorite/getFavoriteList",data:{memberId:e.$store.state.memberId,limit:10,page:e.page,loading:!1}}).then(function(t){if(0===t.data.date.length)return e.$options.methods.showToast("没有更多了!"),void(e.showLoadAnimate=!1);if(t.data.success){for(var o=0;o<t.data.date.length;o++)e.list.push(t.data.date[o]);e.page++}else e.$options.methods.showToast(t.data.msg);e.loading=!1,e.showLoadAnimate=!1}).catch(function(t){console.log(t)})},1e3)},chooseAll:function(){var t=document.getElementsByName("collect_item"),e=document.getElementById("chooseAll");if(e.checked)for(var o=0;o<t.length;o++)t[o].checked=!0;else for(o=0;o<t.length;o++)t[o].checked=!1},clickInput:function(){var t=this,e=document.getElementsByName("collect_item");document.getElementById("chooseAll");t.chooseArr=[],e.forEach(function(e,o,s){s[o].checked&&t.chooseArr.push(o)})},edit:function(){this.editHtml="编辑"==this.editHtml?"完成":"编辑",this.showBtnDelect=!this.showBtnDelect},btnDelectOne:function(t,e){var o=this;if(this.flag)return!1;this.flag=!0,r.MessageBox.confirm("确定执行此操作?").then(function(s){o.$ajax({url:o.webRoot+"/favorite/delFavorite",data:c()({memberId:o.$store.state.memberId,favoriteIds:[t.favoriteID]}),headers:{"Content-Type":"application/json;charset=utf-8"},transformRequest:[function(t){return t}]}).then(function(t){t.data.success&&o.list.splice(e,1),o.$options.methods.showToast(t.data.msg),o.flag=!1}).catch(function(t){console.log(t)})})},declectAll:function(){for(var t=this,e=document.getElementsByName("collect_item"),o=[],s=[],i=0;i<e.length;i++)e[i].checked&&(o.push(t.list[i].favoriteID),s.push(e[i].value));if(0===o.length)return!1;this.flag||(this.flag=!0,r.MessageBox.confirm("确定执行此操作?").then(function(e){o.length<=0?t.flag=!1:t.$ajax({url:t.webRoot+"/favorite/delFavorite",data:c()({memberId:t.$store.state.memberId,favoriteIds:o}),headers:{"Content-Type":"application/json;charset=utf-8"},transformRequest:[function(t){return t}]}).then(function(e){if(!e.data.success)return t.$options.methods.showToast(e.data.msg),t.flag=!1,!1;window.location.reload(),t.flag=!1}).catch(function(t){console.log(t)})}).catch(function(e){t.flag=!1,console.log(e)}))},showToast:function(t,e){e=e||2e3;Object(r.Toast)({message:t,position:"center",duration:e})}}),s),h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"wrap has_header_wrap c_wrap"},[o("com-header",{attrs:{titles:"我的收藏"}},[o("template",{slot:"style-def"})],2),t._v(" "),o("div",{staticClass:"collect_count d_flex",class:"完成"==t.editHtml?"edit":""},[o("div",[o("label",{attrs:{ischeckbox:""}},[o("input",{attrs:{id:"chooseAll",type:"checkbox"},on:{click:t.chooseAll}}),t._v(" "),o("i"),t._v(" "),o("span",[t._v("收藏共"+t._s(t.list.length)+"件")])])]),t._v(" "),o("button",{on:{click:t.edit}},[t._v(t._s(t.editHtml))])]),t._v(" "),o("div",{staticClass:"collect_list",class:{hpd:t.showBtnDelect}},[o("div",{staticClass:"lists"},[o("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.list,function(e,s){return o("li",{staticClass:"d_flex"},[o("div",{staticClass:"left d_flex"},[o("label",{attrs:{ischeckbox:""}},[o("input",{attrs:{name:"collect_item",type:"checkbox"},domProps:{value:s},on:{click:t.clickInput}}),t._v(" "),o("i")])]),t._v(" "),o("div",{staticClass:"right d_flex"},[o("div",{staticClass:"c_img"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.product?e.product.photodURL:"erro",expression:"lt.product?lt.product.photodURL:'erro'"}],attrs:{alt:e.product.productName}})]),t._v(" "),o("router-link",{staticClass:"c_info",attrs:{to:{path:"/product_detail",query:{proid:e.product.productID}}}},[o("p",[t._v(t._s(e.product.productName))]),t._v(" "),o("span",{staticClass:"spec"},[t._v(t._s(e.product.spec))]),t._v(" "),o("h3",{staticClass:"r_color"},[t._v(t._s(t._f("priceFilter")(e.product.ourPrice)))])]),t._v(" "),o("div",{staticClass:"btn_delect"},[t.showBtnDelect?o("button",{staticClass:"btn_delect",on:{click:function(o){t.btnDelectOne(e,s)}}}):t._e()])],1)])}))]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoadAnimate,expression:"showLoadAnimate"}],attrs:{id:"loadAnimate"}},[o("div",[o("mt-spinner",{attrs:{type:"snake",color:"#ddd"}})],1)])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isNothing,expression:"!isNothing"}],attrs:{id:"nothing"}},[o("p",[o("span",[t._v("收藏夹还空空如也哦")]),t._v(" "),o("router-link",{attrs:{to:"/product"}},[t._v("去逛逛")])],1)]),t._v(" "),t.showBtnDelect?o("div",{staticClass:"delect_block"},[o("mt-button",{attrs:{type:"default",size:"small",plain:""},on:{click:t.declectAll}},[t._v("删除")])],1):t._e()],1)},staticRenderFns:[]};var u=o("vSla")(d,h,!1,function(t){o("FiL7")},"data-v-47798018",null);e.default=u.exports}});
//# sourceMappingURL=27.3d7246c35c6141d1b860.js.map