webpackJsonp([4],{"1HW4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("3cXf"),i=a.n(o),s=a("a3Yh"),n=a.n(s),r=a("wSez"),c=a("DMPO"),d={name:"product_detail",data:function(){return{isShowMore:!1,curHeaderTitle:0,isUnscRollable:!1,backParentPage:!1,swiperOption:{notNextTick:!0,autoplay:0,autoHeight:!0,loop:!1,grabCursor:!0,setWrapperSize:!0,pagination:n()({el:".title-swiper-pagination",clickable:!0,clickableClass:"tcp",renderBullet:function(t,e){return'<a class="'+e+'">'+[{name:"商品",id:0},{name:"详情",id:1},{name:"说明书",id:2}][t].name+"</a>"},pagination:"swiper-pagination-bullet",bulletActiveClass:"my-bullet-active"},"bulletActiveClass","cur"),paginationClickable:!0,mousewheelControl:!0,observeParents:!0,on:{touchEnd:function(t){this.activeIndex},slideChange:function(){document.documentElement.scrollTop=document.body.scrollTop=window.scrollY=0}}},swiperOptionImg:{autoplay:0,nested:!0,pagination:{el:".pro_imgs_pagination",clickable:!0}},windowHeight:"",windowScrollHeight:"",curSlideId:"slideProduct",i:0,timer:null,imgSrc:"",productId:this.$route.query.proid,productData:"",curMultIndex:"",curMult:"",num:1,brandList:[],proRecommend:[]}},components:{"mt-field":r.Field,"mt-header":r.Header,"mt-button":r.Button,"mt-tab-container":r.TabContainer,"mt-tab-container-item":r.TabContainerItem,"mt-cell":r.Cell,"mt-popup":r.Popup,"mt-radio":r.Radio,swiper:c.swiper,swiperSlide:c.swiperSlide,"mt-swipe":r.Swipe,"mt-swipe-item":r.SwipeItem},filters:{imgType:function(t){return 1==t?"RX":2==t?"OTC-2":3==t?"OTC-1":void 0},photoFilter:function(t){return t.productPhotos.length<=0?"../../../static/images/ak.png":t.productPhotos[0].photoURL},brandFilter:function(t,e){for(var a in e)if(e[a].brandID==t)return e[a].brandName},priceFilter:function(t){return"￥"+Number(t).toFixed(2)}},watch:{num:function(){if(!/^[0-9]*[1-9][0-9]*$/.test(this.num))return this.$options.methods.showToast("请填写正确的数量"),!1}},computed:{swiper:function(){return this.$refs.mySwiper.swiper},activeIndexSlide:function(){return this.$refs.mySwiper.swiper.activeIndex},showImg:function(){if(this.$data.productData)return this.$data.productData.productPhotos.length>0?1:0}},created:function(){var t=this,e=new Date,a=e.getFullYear(),o=e.getMonth()+1;o<10&&(o="0"+o);var i=e.getDate();i<10&&(i="0"+i);var s=a+"-"+o+"-"+i+" 23:59:59",n=navigator.userAgent.toLowerCase();n.match(/ipad/i),n.match(/iphone os/i),n.match(/midp/i),n.match(/rv:1.2.3.4/i),n.match(/ucweb/i),n.match(/android/i),n.match(/windows ce/i),n.match(/windows mobile/i);gtag("config","UA-108545486-2",{page_title:"产品详情页-"+this.productData.productName,page_path:this.$route.fullPath}),gtag("config","UA-123344424-2",{page_title:"产品详情页-"+this.productData.productName,page_path:this.$route.fullPath}),this.$ajax({url:t.webRoot+"/brand/getBrandList"}).then(function(e){if(!e.data.success)return t.$options.methods.showToast(e.data.msg),!1;t.brandList=e.data.data}).catch(function(t){console.log(t)}),this.$ajax({url:t.webRoot+"/product/getProductByProductId",data:{productId:t.productId,memberId:t.$store.state.memberId}}).then(function(e){if(!e.data.data)return t.$options.methods.showToast("没有商品信息!",1500),setTimeout(function(){t.$router.replace({path:"/index"})},1500),!1;if(e.data.success){if(!e.data.data)return t.$options.methods.showToast(e.data.msg),!1;t.productData=e.data.data,t.imgSrc=t.webRoot+e.data.data.photodURL}else t.$options.methods.showToast(e.data.msg)}).catch(function(t){console.log(t)}),this.$options.methods.getProRecom(t,s,"proRecommend",s,t.proRecommend,"商品推荐无数据")},mounted:function(){this.$emit("changeClass",!1),window.addEventListener("scroll",this.changePage);for(var t=document.getElementById("app").getElementsByTagName("script"),e=0;e<t.length;e++)document.getElementById("app").removeChild(t[e]);var a=document.createElement("script"),o=document.createElement("script");a.src="http://float2006.tq.cn/floatcard?adminid=9815275&sort=2",o.innerText='var tqUserDefined = {openWinType:3};TQ_RQF = 6;TQ_RQC = 2;TQKF.Binding("tqchat1","acd","","123");TQKF.Binding("tqchat2","acd","","123");',document.getElementById("app").appendChild(a),document.getElementById("app").appendChild(o)},destroyed:function(){this.$emit("changeClass",!0)},methods:{chooseMultiSpec:function(t,e){this.curMultIndex=e,this.curMult=t},numReduce:function(){return!(this.num<=1)&&(/^[0-9]*[1-9][0-9]*$/.test(this.num)?void this.num--:(this.$options.methods.showToast("请填写正确的数量"),!1))},numAdd:function(){if(0!==this.num&&this.num){if(!/^[0-9]*[1-9][0-9]*$/.test(this.num))return this.$options.methods.showToast("请填写正确的数量"),!1;this.num++}else this.num=1},jumpDetail:function(t){this.$router.push({path:"product_detail",query:{proid:t.productID}})},changePage:function(){return!1},btnBuy:function(t){if(2==t)return this.$router.push({path:"/toregister",query:{id:this.productId,num:this.num,curMultIndex:this.curMultIndex}}),!1;var e="";if(this.productData.isMultSpec&&!(e=this.curMult.detailCodeID))return this.$options.methods.showToast("请选择规格!"),this.flag=!1,!1;var a={orderId:this.productId,num:this.num,specId:e,specName:this.curMult.propertyAndValue,proNmae:this.productData.productName};this.$store.commit("addBuyProductInfo",a),sessionStorage.addBuyProductInfo=i()(a),this.$router.push({path:"/purchase"})},jumpSildePage:function(t){this.curHeaderTitle=t,this.swiper.slideTo(t,500,!1)},btnSave:function(){console.log("点击确定")},collection:function(t){var e=this;return e.$store.state.memberId?this.flag?void 0:t.isCollect?(this.$ajax({url:e.webRoot+"/favorite/delFavoriteBymemberIdAndProId",data:{memberId:e.$store.state.memberId,productId:t.productID}}).then(function(t){console.log(t),t.data.success&&(e.productData.isCollect=!1),e.$options.methods.showToast(t.data.msg),e.flag=!1}).catch(function(t){console.log(t)}),!1):void this.$ajax({url:e.webRoot+"/favorite/addFavorite",data:{productID:e.productId,memberID:e.$store.state.memberId,sysNo:"WAP端"}}).then(function(t){t.data.success&&(e.productData.isCollect=!0),e.$options.methods.showToast(t.data.msg),e.flag=!1}).catch(function(t){console.log(t),e.flag=!1}):(r.MessageBox.confirm("请先登录").then(function(t){e.$router.push({path:"/login",query:{redirect:"pdt"}})}).catch(function(t){console.log(t)}),!1)},goBack:function(){this.$store.commit("addBuyProductInfo",""),this.$store.commit("addBbuyProductAdd",""),sessionStorage.removeItem("addBuyProductInfo"),sessionStorage.removeItem("addBbuyProductAdd"),this.$router.go(-1)},showToast:function(t,e){e=e||2e3;Object(r.Toast)({message:t,position:"center",duration:e})},changeClassOne:function(t){t?(this.backParentPage=!0,this.isUnscRollable=!1):(this.backParentPage=!1,this.isUnscRollable=!0)},showMore:function(){this.isShowMore=!0},getProRecom:function(t,e,a,o,i,s){t.$ajax({url:t.webRoot+"/seachSt",data:{endDate:e,pageNo:a,isValid:1}}).then(function(e){if(!(e.data.data.length<=0)){var a=e.data.data[0].showID;e.data.success?t.$ajax({url:t.webRoot+"/seachStDetail",data:{endDate:o,showID:a,isValid:1}}).then(function(e){if(e.data.success&&e.data.length>0){i.splice(0);for(var a=0;a<e.data.data.length;a++){var o=e.data.data[a].productID;t.$ajax({url:t.webRoot+"/product/getProductByProductId",data:{productId:o,memberId:t.$store.state.memberId}}).then(function(t){t.data.success&&t.data.data&&i.push(t.data.data),t.data.success||(i=[],console.log(s))}).catch(function(t){console.log(t)})}}else i=[],console.log(s)}).catch(function(t){console.log(t)}):(i=[],console.log(s))}}).catch(function(t){console.log(t)})}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"wrap has_header_wrap Product_detail_wrap"},[o("header",{staticClass:"mint-header is-fixed d_flex"},[o("div",{staticClass:"mint-header-button is-left",on:{click:t.goBack}},[t._m(0)]),t._v(" "),t._m(1),t._v(" "),o("div",{staticClass:"mint-header-button is-right",on:{click:function(e){return e.preventDefault(),t.showMore(e)}}},[t._m(2)])]),t._v(" "),o("mt-popup",{staticClass:"more_block",attrs:{position:"top"},model:{value:t.isShowMore,callback:function(e){t.isShowMore=e},expression:"isShowMore"}},[o("router-link",{attrs:{to:"/index"}},[t._v("首页")]),t._v(" "),o("router-link",{attrs:{to:"/sort"}},[t._v("分类")]),t._v(" "),o("router-link",{attrs:{to:"/myinfo"}},[t._v("个人中心")])],1),t._v(" "),o("section",{staticClass:"wrap_in",class:{unscrollable:t.isUnscRollable}},[o("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption}},[o("swiper-slide",{staticClass:"slide_product",attrs:{id:"slideProduct"}},[o("div",{staticClass:"pro_imgs"},[o("swiper",{ref:"mySwiper-img",attrs:{options:t.swiperOptionImg}},[t.showImg?t._e():o("swiper-slide",[o("img",{attrs:{src:a("d8x2"),alt:"阿康大药房旗舰店"}})]),t._v(" "),t._l(t.productData.productPhotos,function(e,a){return t.showImg?o("swiper-slide",{key:a},[o("img",{attrs:{src:e.photoURL,alt:t.productData.productName}})]):t._e()})],2),t._v(" "),o("div",{staticClass:"pro_imgs_pagination swiper-pagination"})],1),t._v(" "),o("div",{staticClass:"base_info"},[o("h2",[o("i",{directives:[{name:"show",rawName:"v-show",value:t.productData.prescriptionType,expression:"productData.prescriptionType"}],class:t._f("imgType")(t.productData.prescriptionType)}),t._v(t._s(t.productData.productName))]),t._v(" "),o("span",{domProps:{innerHTML:t._s(t.productData.sellingPoint)}}),t._v(" "),o("h2",[o("span",{staticClass:"r_color"},[t._v(t._s(t._f("priceFilter")(t.productData.ourPrice)))]),o("span",[t._v(t._s(t._f("priceFilter")(t.productData.price)))])])]),t._v(" "),o("div",{staticClass:"base_info_2"},[o("p",{staticClass:"d_flex"},[o("span",[t._v("批准文号：")]),o("span",[t._v(t._s(t.productData.productCategoryProperty?t.productData.productCategoryProperty.approval_number:"")),o("a",{attrs:{href:"javscript:;"}},[t._v("（国家食药局查询）")])])]),t._v(" "),o("p",{staticClass:"d_flex"},[o("span",[t._v("生产厂家：")]),o("span",[t._v(t._s(t.productData.productCategoryProperty?t.productData.productCategoryProperty.manufacture_factory:t.productData.productFactory))])])]),t._v(" "),o("div",{staticClass:"promise d_flex"},[o("span",[o("i"),t._v("100%正品")]),t._v(" "),o("span",[o("i"),t._v("药监认证")]),t._v(" "),o("span",[o("i"),t._v("厂家定点")]),t._v(" "),o("span",[o("i"),t._v("门店服务")])]),t._v(" "),t._e(),t._v(" "),o("div",{staticClass:"spec d_flex"},[o("div",{staticClass:"left"},[t._v("\r\n\t\t\t\t\t规格\r\n\t\t\t\t")]),t._v(" "),o("ul",{staticClass:"right"},[!t.productData.isMultSpec&&t.productData.spec?o("li",{domProps:{textContent:t._s(t.productData.spec)}}):t._e(),t._v(" "),t._l(t.productData.productDetailCode,function(e,a){return t.productData.isMultSpec?o("li",{class:{cur:t.curMultIndex===a},on:{click:function(o){t.chooseMultiSpec(e,a)}}},[t._v(t._s(e.propertyAndValue))]):t._e()})],2)]),t._v(" "),o("div",{staticClass:"nums d_flex"},[o("div",{staticClass:"left"},[t._v("\r\n\t\t\t\t\t数量\r\n\t\t\t\t")]),t._v(" "),o("div",{staticClass:"right"},[o("button",{on:{click:t.numReduce}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.num,expression:"num",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),o("button",{on:{click:t.numAdd}})])]),t._v(" "),o("div",{staticClass:"recommend"},[o("h3",[t._v("商品推荐")]),t._v(" "),o("ul",{staticClass:"d_flex"},t._l(t.proRecommend,function(e){return o("li",{on:{click:function(a){t.jumpDetail(e)}}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productPhotos>0?e.productPhotos[0].photoURL:"",expression:"pr.productPhotos>0?pr.productPhotos[0].photoURL:''"}],attrs:{alt:e.productName}}),t._v(" "),o("p",[t._v(t._s(e.productName))]),t._v(" "),o("span",[t._v(t._s(e.spec))]),t._v(" "),o("p",[o("span",{staticClass:"r_color"},[t._v("￥"+t._s(e.ourPrice))])])])}))])]),t._v(" "),o("swiper-slide",{attrs:{id:"slideDetail"}},[o("div",{staticClass:"slide_detail"},[o("div",{staticClass:"block-2"},[o("h3",[t._v("产品展示")]),t._v(" "),o("div",{staticClass:"block-2-imgs",domProps:{innerHTML:t._s(t.productData.remark)}})])])]),t._v(" "),o("swiper-slide",{attrs:{id:"slideInstructions"}},[o("div",{staticClass:"slide_instructions",domProps:{innerHTML:t._s(t.productData.instructions)}})]),t._v(" "),o("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],1),t._v(" "),o("div",{staticClass:"options d_flex"},[o("div",{staticClass:"left d_flex"},[o("a",{staticStyle:{cursor:"pointer"},attrs:{id:"tqchat2",href:"javascript:void(0)",title:"在线咨询"}},[t._v("在线咨询")]),t._v(" "),o("a",{attrs:{href:"tel:400-9309-990"}},[t._v("电话咨询")]),t._v(" "),o("a",{class:{is_collect:t.productData.isCollect},attrs:{href:"javascript:;"},on:{click:function(e){t.collection(t.productData)}}},[t._v("收藏")])]),t._v(" "),o("div",{staticClass:"right"},[1!==t.productData.prescriptionType?o("button",{on:{click:t.btnBuy}},[t._v("立即购买")]):t._e(),t._v(" "),1===t.productData.prescriptionType?o("button",{on:{click:function(e){t.btnBuy(2)}}},[t._v("登记需求")]):t._e()])])],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[o("router-view",{on:{changeClass:t.changeClassOne}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"mint-button mint-button--default mint-button--normal"},[e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-back"})]),this._v(" "),e("label",{staticClass:"mint-button-text"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"mint-header-title"},[e("div",{staticClass:"swiper-pagination title-swiper-pagination tcp"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"mint-button mint-button--default mint-button--normal"},[e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-more"})]),this._v(" "),e("label",{staticClass:"mint-button-text"})])}]};var l=a("vSla")(d,u,!1,function(t){a("aLzo"),a("G2Bj")},"data-v-4326c796",null);e.default=l.exports},G2Bj:function(t,e){},aLzo:function(t,e){},d8x2:function(t,e,a){t.exports=a.p+"static/img/ak.5c05aae.png"}});
//# sourceMappingURL=4.3065bf761570a76e6c29.js.map