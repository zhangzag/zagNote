webpackJsonp([7],{AOIv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("wSez"),o={name:"toregister",data:function(){return{isUnscRollable:!1,backParentPage:!1,username:this.$route.query.uName?this.$route.query.uName:"",phone:this.$route.query.uPhone?this.$route.query.uPhone:"",Remarks:this.$route.query.uRemark?this.$route.query.uRemark:"",productId:this.$route.query.id,productData:"",curMultIndex:0===this.$route.query.curMultIndex||this.$route.query.curMultIndex?Number(this.$route.query.curMultIndex):"",curMult:"",num:this.$route.query.num?this.$route.query.num:1,flag:!1,options:[{label:"男",value:"male"},{label:"女",value:"female"}],sexVal:"male"}},components:{"mt-field":s.Field,"mt-cell":s.Cell,"mt-checklist":s.Checklist,"mt-radio":s.Radio},watch:{num:function(){if(!/^[0-9]*[1-9][0-9]*$/.test(this.num))return this.$options.methods.showToast("请填写正确的数量"),!1}},filters:{filterImgs:function(t){return!!t&&(t.length>0?t[0].photoURL:"../../../static/images/ak.png")}},created:function(){var t=this;this.$ajax({url:t.webRoot+"/product/getProductByProductId",data:{productId:t.productId}}).then(function(e){if(e.data.success){if(!e.data.data)return t.$options.methods.showToast(e.data.msg),!1;t.productData=e.data.data,(t.$route.query.curMultIndex||0===t.$route.query.curMultIndex)&&(t.curMult=e.data.data.productDetailCode[t.$route.query.curMultIndex])}else t.$options.methods.showToast(e.data.msg)}).catch(function(t){console.log(t)})},updated:function(){},mounted:function(){this.$emit("changeClass",!1),gtag("event","进入需求登记页面",{event_category:"商品id: "+this.productData.productID,event_label:"成功"})},destroyed:function(){this.$emit("changeClass",!0)},methods:{chooseMultiSpec:function(t,e){this.curMultIndex=e,this.curMult=t},numReduce:function(){return!(this.num<=1)&&(/^[0-9]*[1-9][0-9]*$/.test(this.num)?void this.num--:(this.$options.methods.showToast("请填写正确的数量"),!1))},numAdd:function(){if(0!==this.num&&this.num){if(!/^[0-9]*[1-9][0-9]*$/.test(this.num))return this.$options.methods.showToast("请填写正确的数量"),!1;this.num++}else this.num=1},btnConfirm:function(){var t=this;if(this.flag)return!1;this.flag=!0;var e="";return this.productData.isMultSpec&&(e=this.curMult.detailCodeID),this.username?this.phone&&/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(this.phone)?void this.$ajax({url:t.webRoot+"/require/addRequire",data:{productID:t.productData.productID,productName:t.productData.productName,productCode:t.productData.productCode,detailCodeID:e,qty:t.num,memberID:t.$store.state.memberId,realName:t.username,phone:t.phone,remark:t.Remarks,sysNo:"WAP端"}}).then(function(e){if(!e.data.success)return t.$options.methods.showToast(e.data.msg),t.flag=!1,gtag("event","提交需求登记",{event_category:t.productData.productID,event_label:"失败"}),!1;gtag("event","提交需求登记",{event_category:t.productData.productID,event_label:"成功"}),s.MessageBox.alert(e.data.msg,"提示").then(function(e){setTimeout(function(){t.$router.go(-1)},300)})}).catch(function(t){console.log(t)}):(t.$options.methods.showToast("请填写正确的手机号码!"),t.flag=!1,!1):(t.$options.methods.showToast("请填写姓名!"),t.flag=!1,!1)},btnBuy:function(t){if(2==t)return this.$router.push({path:"/purchase"}),!1;this.$router.push({path:"/purchase",query:{id:"221"}})},showToast:function(t,e){e=e||2e3;Object(s.Toast)({message:t,position:"center",duration:e})},changeClassOne:function(t){t?(this.backParentPage=!0,this.isUnscRollable=!1):(this.backParentPage=!1,this.isUnscRollable=!0)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"wrap has_header_wrap"},[a("com-header",{attrs:{titles:"需求登记"}},[a("template",{slot:"style-def"})],2),t._v(" "),a("section",{staticClass:"wrap_in toregister",class:{unscrollable:t.isUnscRollable}},[a("div",{staticClass:"trhead"},[t._v("温馨提示：提交登记后，阿康门店药师将在1个小时内致电与您确认，请您保持电话通畅哦。")]),t._v(" "),a("div",{staticClass:"pro"},[a("div",{staticClass:"item d_flex"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t._f("filterImgs")(t.productData.productPhotos),alt:t.productData.productName}})]),t._v(" "),a("div",{staticClass:"right"},[a("h2",{staticClass:"d_flex"},[a("span",[t._v(t._s(t.productData.productName))]),a("span",[t._v("￥"+t._s(t.productData.ourPrice))])]),t._v(" "),a("span",[t._v(t._s(t.productData.spec))])])])]),t._v(" "),a("div",{staticClass:"spec d_flex"},[a("div",{staticClass:"left"},[t._v("\r\n\t\t\t\t规格\r\n\t\t\t")]),t._v(" "),a("ul",{staticClass:"right"},[t._l(t.productData.productDetailCode,function(e,s){return t.productData.isMultSpec?a("li",{class:{cur:s===t.curMultIndex},on:{click:function(a){t.chooseMultiSpec(e,s)}}},[t._v(t._s(e.propertyAndValue))]):t._e()}),t._v(" "),t.productData.isMultSpec?t._e():a("li",{staticClass:"cur"},[t._v(t._s(t.productData.spec))])],2)]),t._v(" "),a("div",{staticClass:"nums d_flex"},[a("div",{staticClass:"left"},[t._v("\r\n\t\t\t\t数量\r\n\t\t\t")]),t._v(" "),a("div",{staticClass:"right"},[a("button",{on:{click:t.numReduce}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.num,expression:"num",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("button",{on:{click:t.numAdd}})])]),t._v(" "),a("div",{staticClass:"user_info"},[a("div",[a("i",{staticClass:"icon_star"}),t._v(" "),a("mt-field",{attrs:{label:"姓名",placeholder:"请输入名字"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("div",[a("i",{staticClass:"icon_star"}),t._v(" "),a("mt-field",{attrs:{label:"手机",placeholder:"选择省市区",type:"text"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),a("div",[a("i",{staticClass:"icon_star"}),t._v(" "),a("mt-field",{staticClass:"bg_white",attrs:{label:"地区",disabled:"",placeholder:"请输入联系手机号",type:"text"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),a("div",[a("i",{staticClass:"icon_star"}),t._v(" "),a("mt-field",{attrs:{label:"详细地址",placeholder:"请输入详细地址",type:"textarea",rows:"4"},model:{value:t.del_address,callback:function(e){t.del_address=e},expression:"del_address"}})],1),t._v(" "),a("div",[a("mt-field",{attrs:{label:"年龄",placeholder:"请输入年龄",type:"number"},model:{value:t.age,callback:function(e){t.age=e},expression:"age"}})],1),t._v(" "),a("mt-radio",{staticClass:"sexs d_flex",attrs:{title:"性别",options:t.options},model:{value:t.sexVal,callback:function(e){t.sexVal=e},expression:"sexVal"}}),t._v(" "),a("div",[a("mt-field",{attrs:{label:"身份证号",placeholder:"请填写身份证号码",type:"number"},model:{value:t.id_num,callback:function(e){t.id_num=e},expression:"id_num"}})],1),t._v(" "),a("div",[a("mt-field",{attrs:{label:"门店递送",type:"text"}})],1),t._v(" "),a("mt-checklist",{attrs:{title:"复选框列表",options:["选项A","选项B","选项C"]},model:{value:t.sexVal,callback:function(e){t.sexVal=e},expression:"sexVal"}}),t._v(" "),a("mt-field",{attrs:{label:"留言",placeholder:"请选择需求数量，并留下您的收货地址和其他要求，让我们更好的为您服务",type:"textarea",rows:"4"},model:{value:t.Remarks,callback:function(e){t.Remarks=e},expression:"Remarks"}}),t._v(" "),a("div",[a("mt-field",{attrs:{label:"处方笺",type:"text"}})],1)],1),t._v(" "),a("p",{staticClass:"ophone"},[t._v("如紧急，可拨打400-9309-990咨询")]),t._v(" "),a("div",{staticClass:"btn_block"},[a("button",{on:{click:t.btnConfirm}},[t._v("提交需求")])])]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("router-view",{on:{changeClass:t.changeClassOne}})],1)],1)},staticRenderFns:[]};var r=a("vSla")(o,i,!1,function(t){a("BPA9"),a("X0GY")},"data-v-a64482ee",null);e.default=r.exports},BPA9:function(t,e){},X0GY:function(t,e){}});
//# sourceMappingURL=7.ae2ae03f5a1ce4187469.js.map