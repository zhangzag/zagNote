{"version":3,"sources":["webpack:///src/components/Prescript/Prescript.vue","webpack:///./src/components/Prescript/Prescript.vue?8d29","webpack:///./src/components/Prescript/Prescript.vue"],"names":["Prescript","name","data","flag","isUnscRollable","backParentPage","username","phone","age","hospital","ks","zd","rpList","index","medicine","spec","cfjBgSrc","files","progress","isUploadProgress","options","label","value","sexVal","components","mt-cell","mint_ui_common","mt-button","mt-header","mt-field","comHeaderTitle","ComHeaderTitle","mt-spinner","mt-radio","filters","created","mounted","this","$emit","updated","$nextTick","destroyed","methods","onFileChange","e","_self","file","target","dataTransfer","reader","FileReader","readAsDataURL","onload","img","src","result","Image","canvas","document","createElement","drawer","getContext","width","height","drawImage","base64","toDataURL","type","split","addRpList","push","length","reduce","n","splice","confirmCfj","formData","FormData","append","$store","state","memberId","$options","showToast","sex","i","getElementById","checked","$ajax","post","webRoot","headers","Content-Type","transformRequest","then","res","success","msg","setTimeout","location","reload","prescriptHistory","$router","path","query","id","time","Object","message","position","duration","changeClassOne","isChildDestroyed","Prescript_Prescript","render","_vm","_h","$createElement","_c","staticClass","class","unscrollable","attrs","titles","slot","_v","placeholder","model","callback","$$v","expression","title","rows","size","plain","on","click","_l","_s","$event","directives","rawName","autocomplete","domProps","input","composing","$set","accept","change","_m","to","changeClass","staticRenderFns","ischeckboxtwo","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.710f7302395f723f8693.js","sourcesContent":["<template>\t\r\n<section class=\"wrap has_header_wrap\" :class=\"{ unscrollable: isUnscRollable }\">\r\n\t<!-- 头部标题 -->\r\n\t<com-header titles=\"处方笺\">\r\n\t\t<template  slot=\"style-def\"></template>\r\n\t</com-header>\r\n\t<!-- 头部标题 end -->\r\n\r\n\t<!-- 售后服务列表 -->\r\n\t<div class=\"prescript_wrap\">\r\n\t\t<div class=\"pt_block\">\r\n\t\t\t<mt-field label=\"姓名\" placeholder=\"请输入患者姓名\" v-model=\"username\"></mt-field>\r\n\t\t\t<mt-field label=\"手机号码\" placeholder=\"请输入手机号码\" type=\"tel\" v-model=\"phone\"></mt-field>\r\n\t\t\t<mt-radio\r\n\t\t\t  class=\"sexs d_flex\"\t\r\n\t\t\t  title=\"性别\"\r\n\t\t\t  v-model=\"sexVal\"\r\n\t\t\t  :options=\"options\">\r\n\t\t\t</mt-radio>\r\n\t\t\t<mt-field label=\"年龄\" placeholder=\"请输入年龄\" type=\"number\" v-model=\"age\"></mt-field>\r\n\t\t</div>\r\n\t\t<div class=\"pt_block\">\r\n\t\t\t<mt-field label=\"医院\" placeholder=\"请输入开据医院\" v-model=\"hospital\"></mt-field>\r\n\t\t\t<mt-field label=\"科别\" placeholder=\"请输入科别\" type=\"text\" v-model=\"ks\"></mt-field>\r\n\t\t</div>\r\n\t\t<div class=\"pt_block\">\r\n\t\t\t<mt-field label=\"临床诊断\" placeholder=\"请输入诊断结果\" type=\"textarea\" rows=\"4\" v-model=\"zd\"></mt-field>\r\n\t\t</div>\r\n\t\t<div class=\"pt_block pro\">\r\n\t\t\t<mt-cell>\r\n\t\t\t\t<i class=\"icons_rx\" slot=\"icon\"></i>\r\n\t\t\t\t<mt-button \r\n\t\t\t\t\tclass=\"warm\" \r\n\t\t\t\t\ttype=\"default\" \r\n\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\tplain\r\n\t\t\t\t\t@click=\"addRpList\">添加药品</mt-button>\r\n\t\t\t</mt-cell>\r\n\t\t\t<ul id=\"add_rp_pro\">\r\n\t\t\t\t<li class=\"rp_pro\" v-for='(n,index) in rpList'>\r\n\t\t\t\t\t<div class=\"d_flex\">\r\n\t\t\t\t\t\t<span>{{index+1}}</span><span @click=\"reduce(n,index)\"><i></i></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"d_flex\">\r\n\t\t\t\t\t\t<span>药品名</span>\r\n\t\t\t\t\t\t<span><input \r\n\t\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\t\t:name=\"'prescriptionDetails['+index+'].medicine'\"\r\n\t\t\t\t\t\t\tv-model=\"n.medicine\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入药品名称\" \r\n\t\t\t\t\t\t\ttype=\"text\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"d_flex\">\r\n\t\t\t\t\t\t<span>规格</span>\r\n\t\t\t\t\t\t<span><input \r\n\t\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\t\t:name=\"'prescriptionDetails['+index+'].spec'\"\r\n\t\t\t\t\t\t\tv-model=\"n.spec\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入药品规格\" \r\n\t\t\t\t\t\t\ttype=\"text\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class=\"pt_block pt_upimg\">\r\n\t\t\t<h3>处方笺图片</h3>\r\n\t\t\t<div class=\"up\">\r\n\t\t\t\t<div class=\"up_in\">\r\n\t\t\t\t\t<img :src=\"cfjBgSrc\">\r\n\t\t\t\t\t<input @change=\"onFileChange\" accept=\"image/*\" type=\"file\" name=\"file\">\r\n\t\t\t\t\t<div class=\"uploadProgress\" v-show=\"isUploadProgress\">\r\n\t\t\t\t\t\t<p>图片上传中</p>\r\n\t\t\t\t\t\t<mt-spinner type=\"fading-circle\"></mt-spinner>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"pt_block to_agreem\">\r\n\t\t\t<div class=\"d_flex\">\r\n\t\t\t\t<label ischeckboxtwo><input checked id=\"agreeLabel\" type=\"checkbox\"><i></i></label>\r\n\t\t\t\t<router-link class=\"mint-cell-allow-right\" to=\"prescript/agreement\">同意处方购买协议</router-link>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- 售后服务列表 end -->\r\n\t<!-- 按钮 -->\r\n\t<div class=\"prescript_btns\">\r\n\t\t<mt-button @click=\"prescriptHistory\" size=\"small\" plain>查看记录{{ progress }}</mt-button>\r\n\t\t<mt-button \r\n\t\t\tclass=\"green\" \r\n\t\t\tsize=\"small\"\r\n\t\t\t@click=\"confirmCfj\">提交处方笺</mt-button>\r\n\t</div>\r\n\t<!-- 按钮 end -->\r\n\r\n\t<!-- 子页面 -->\r\n    <transition name=\"fade\">\r\n    \t<router-view v-on:changeClass=\"changeClassOne\"></router-view>\r\n    </transition>\r\n    <!-- 子页面 end -->\r\n</section>\r\n</template>\r\n\r\n<script>\r\nimport comHeaderTitle from '@/components/Common/ComHeaderTitle'\r\nimport { Cell, Button, MessageBox, Header, Field, Toast, Spinner, Radio } from 'mint-ui';\r\n\r\nexport default {\r\n\tname: 'info',\r\n\tdata (){\r\n\t\treturn {\r\n\t\t\tflag: false,//\r\n\t\t\tisUnscRollable: false, //是否页面不可滚动\r\n\t\t\tbackParentPage: false, //是否回到父页面\r\n\t\t\tusername: '', //患者姓名\r\n\t\t\tphone: '',//手机号码\r\n\t\t\tage: '',//年龄\r\n\t\t\thospital: '',//医院\r\n\t\t\tks: '', //科别\r\n\t\t\tzd: '', //诊断\r\n\t\t\trpList: [\r\n\t\t\t\t{ index: 1, medicine: '', spec: '' },\r\n\t\t\t],\r\n\t\t\tcfjBgSrc: './static/images/upload_img.jpg',//处方笺背景图\r\n\t\t\tfiles: '',\r\n\t\t\tprogress: '',\r\n\t\t\tisUploadProgress: false,//上传文件是显示\r\n\t\t\toptions: [\r\n\t\t\t  {\r\n\t\t\t    label: '男',\r\n\t\t\t    value: 'male'\r\n\t\t\t  },\r\n\t\t\t  {\r\n\t\t\t    label: '女',\r\n\t\t\t    value: 'female'\r\n\t\t\t  }\r\n\t\t\t],\r\n\t\t\tsexVal: 'male',//选中的性别\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\t'mt-cell': Cell,\r\n\t\t'mt-button': Button,\r\n\t\t'mt-header': Header,\r\n\t\t'mt-field': Field,\r\n\t\tcomHeaderTitle, // 公共头部标题\r\n\t\t'mt-spinner': Spinner,\r\n\t\t'mt-radio': Radio,\r\n\t},\r\n\tfilters: {\r\n\t\t\r\n\t},\r\n\tcreated (){\r\n\r\n\t},\r\n\tmounted (){\r\n\t\tthis.$emit('changeClass',false);\r\n\t},\r\n\tupdated (){\r\n\t    this.$nextTick(function () {\r\n\t      // if( !this.backParentPage ){\r\n\t      //   this.isUnscRollable = true;\r\n\t      // }\r\n\t    }) \r\n\t},\r\n\tdestroyed (){\r\n\t\tthis.$emit('changeClass',true);\r\n\t},\r\n\tmethods: {\r\n\t\t//图片上传\r\n\t\tonFileChange(e) {\r\n\t\t\t\r\n\t\t\t// 新\r\n\t\t\tvar _self = this;\r\n\t\t\tvar file = e.target.files[0] || e.dataTransfer.files;\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\t\r\n\t\t\treader.readAsDataURL(file);//转成base64\r\n\t\t\treader.onload = function() {\r\n\t          img.src = this.result;\r\n\t        }\r\n\t        // console.log(file)\r\n\t        var img = new Image,\r\n\t\t\t\r\n\t\t\twidth = 640, //image resize   压缩后的宽\r\n\t\t\tquality = 0.7, //image quality  压缩质量\r\n\t\t\tcanvas = document.createElement(\"canvas\"),\r\n\t\t\tdrawer = canvas.getContext(\"2d\");\r\n\t\t\timg.onload = function() {\r\n\t          canvas.width = width;\r\n\t          canvas.height = width * (img.height / img.width);\r\n\t          drawer.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\t          // var base64 = canvas.toDataURL(\"image/jpeg\", quality); // 这里就拿到了压缩后的base64图片\r\n\t          var base64 = canvas.toDataURL(file.type, quality); // 这里就拿到了压缩后的base64图片\r\n\t          // var pic = base64.split(',')[1];\r\n\t          _self.cfjBgSrc = base64;\r\n\t          _self.files = base64.split(',')[1];\r\n\t          // 清空文件上传控件的值  不清理会出现选择同样的图片会无法触发input事件了\r\n\t          e.target.value = null;\r\n\t        }\r\n\t\t\t// 新 end\r\n\t\t},\r\n\t\t// createImage(file) {\r\n\t\t//   var image = new Image();\r\n\t\t//   var reader = new FileReader();\r\n\t\t//   var vm = this;\r\n\r\n\t\t//   reader.onload = (e) => {\r\n\t\t//     vm.cfjBgSrc = e.target.result;\r\n\t\t//   };\r\n\t //      reader.readAsDataURL(file);\r\n\t\t// },\r\n\t\t//添加药品\r\n\t\taddRpList (){\r\n\t\t\tthis.rpList.push({ index: this.rpList.length+1, medicine: '', spec: '' });\r\n\t\t},\r\n\t\t//减少药品\r\n\t\treduce (n,index) {\r\n\t\t\t// console.log(n, index);\r\n\t\t\tthis.rpList.splice(index,1)\r\n\t\t},\r\n\t\t//提交处方笺\r\n\t\tconfirmCfj (){\r\n\t\t\tconst _self = this;\r\n\r\n\t\t\tvar formData = new FormData();\r\n\t\t\tformData.append('memberID', this.$store.state.memberId);\r\n\t\t\tformData.append('sufferer', this.username); //患者姓名\r\n\t\t\tformData.append('phone', this.phone); //患者手机\r\n\t\t\tformData.append('hospitalName', this.hospital); //医院\r\n\t\t\tformData.append('offices', this.ks); //科别\r\n\t\t\tformData.append('diagnosed', this.zd); //临床诊断\r\n\t\t\tformData.append('file',this.files);//图片\r\n\t\t\tformData.append('age',this.age);//年龄\r\n\t\t\tformData.append('sysNo', 'WAP端');//端\r\n\r\n\t\t\tif(!this.username) {\r\n\t\t\t\tthis.$options.methods.showToast('请填写患者姓名!');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif( this.sexVal=='male' ){\r\n\t\t\t\tvar sex = 1;\r\n\t\t\t}else{\r\n\t\t\t\tvar sex = 0;\r\n\t\t\t}\r\n\t\t\tformData.append('sex',sex);//性别\r\n\r\n\t\t\tfor (var i = 0; i < this.rpList.length; i++) {\r\n\t\t\t\t// console.log(this.rpList[i])\r\n\t\t\t\tformData.append('prescriptionDetails['+i+'].medicine', this.rpList[i].medicine); //rp\r\n\t\t\t\tformData.append('prescriptionDetails['+i+'].spec', this.rpList[i].spec); //rp\r\n\t\t\t}\r\n\t\t\t// var file = document.getElementById(\"file\").files[0];\r\n\t\t\t// console.log(file)\r\n\t\t\tif( this.flag ) return false;\r\n\r\n\t\t\tif( !document.getElementById('agreeLabel').checked ){\r\n\t\t\t\tthis.$options.methods.showToast('请阅读并同意同意处方购买协议!');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.flag = true;\r\n\t\t\tthis.isUploadProgress = true;//显示上传中\r\n\r\n\t\t\tlet config = {\r\n              headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n              },\r\n\t\t\t  transformRequest: [function (data) {\r\n\t\t\t  \treturn data\r\n\t\t\t  }],\r\n            }\r\n\r\n\t\t\tthis.$ajax.post(_self.webRoot + '/prescription/addPrescription', formData, config).then(function (res) {\r\n              // console.log(res)\r\n              \t_self.isUploadProgress = false;\r\n              if( res.data.success ){\r\n              \t_self.$options.methods.showToast( res.data.msg, 1500 );\r\n              \tsetTimeout(function(){\r\n              \t\t_self.flag = false;\r\n              \t\tlocation.reload();\r\n              \t},1500);\r\n              }else{\r\n              \t_self.$options.methods.showToast( res.data.msg, 1500 );\r\n              \t_self.flag = false;\r\n              }\r\n            })\r\n\t\t},\r\n\t\t// 查看记录\r\n\t\tprescriptHistory (){\r\n\t\t\tthis.$router.push( {path: 'prescript/Prescript_detail', query: { id: '001' }} );\r\n\t\t},\r\n\r\n\t    //显示提示信息\r\n\t    showToast( msg, time ){\r\n\t      var time = time ? time : 2000;\r\n\r\n\t      Toast({\r\n\t        message: msg,\r\n\t        position: 'center',\r\n\t        duration: time\r\n\t      });     \r\n\t    },\r\n\t\t// 判断是否返回父页面\r\n\t    changeClassOne ( isChildDestroyed ){\r\n\t      if( isChildDestroyed ){ \r\n\t        //退出子页面\r\n\t        this.backParentPage = true; //返回首页\r\n\t        this.isUnscRollable = false;\r\n\t      }else{\r\n\t        //没退出子页面\r\n\t        this.backParentPage = false; // 没返回首页\r\n\t        this.isUnscRollable = true;\r\n\t      }\r\n\t    },\r\n\t},\r\n}\t\r\n</script>\r\n\r\n<style scoped>\r\n@import '../../../static/css/headerTitle.css';\r\n@import '../../../static/css/childre_wrap.css';\r\n@import './Css/prescript.css';\r\n</style>\r\n<style>\r\n.pt_block.pro>a>.mint-cell-wrapper {\r\n\tborder-bottom: 0;\r\n}\r\n\r\n.prescript_wrap .uploadProgress span {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Prescript/Prescript.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"wrap has_header_wrap\",class:{ unscrollable: _vm.isUnscRollable }},[_c('com-header',{attrs:{\"titles\":\"处方笺\"}},[_c('template',{slot:\"style-def\"})],2),_vm._v(\" \"),_c('div',{staticClass:\"prescript_wrap\"},[_c('div',{staticClass:\"pt_block\"},[_c('mt-field',{attrs:{\"label\":\"姓名\",\"placeholder\":\"请输入患者姓名\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"手机号码\",\"placeholder\":\"请输入手机号码\",\"type\":\"tel\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('mt-radio',{staticClass:\"sexs d_flex\",attrs:{\"title\":\"性别\",\"options\":_vm.options},model:{value:(_vm.sexVal),callback:function ($$v) {_vm.sexVal=$$v},expression:\"sexVal\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"年龄\",\"placeholder\":\"请输入年龄\",\"type\":\"number\"},model:{value:(_vm.age),callback:function ($$v) {_vm.age=$$v},expression:\"age\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pt_block\"},[_c('mt-field',{attrs:{\"label\":\"医院\",\"placeholder\":\"请输入开据医院\"},model:{value:(_vm.hospital),callback:function ($$v) {_vm.hospital=$$v},expression:\"hospital\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"科别\",\"placeholder\":\"请输入科别\",\"type\":\"text\"},model:{value:(_vm.ks),callback:function ($$v) {_vm.ks=$$v},expression:\"ks\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pt_block\"},[_c('mt-field',{attrs:{\"label\":\"临床诊断\",\"placeholder\":\"请输入诊断结果\",\"type\":\"textarea\",\"rows\":\"4\"},model:{value:(_vm.zd),callback:function ($$v) {_vm.zd=$$v},expression:\"zd\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pt_block pro\"},[_c('mt-cell',[_c('i',{staticClass:\"icons_rx\",attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_vm._v(\" \"),_c('mt-button',{staticClass:\"warm\",attrs:{\"type\":\"default\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":_vm.addRpList}},[_vm._v(\"添加药品\")])],1),_vm._v(\" \"),_c('ul',{attrs:{\"id\":\"add_rp_pro\"}},_vm._l((_vm.rpList),function(n,index){return _c('li',{staticClass:\"rp_pro\"},[_c('div',{staticClass:\"d_flex\"},[_c('span',[_vm._v(_vm._s(index+1))]),_c('span',{on:{\"click\":function($event){_vm.reduce(n,index)}}},[_c('i')])]),_vm._v(\" \"),_c('div',{staticClass:\"d_flex\"},[_c('span',[_vm._v(\"药品名\")]),_vm._v(\" \"),_c('span',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(n.medicine),expression:\"n.medicine\"}],attrs:{\"autocomplete\":\"off\",\"name\":'prescriptionDetails['+index+'].medicine',\"placeholder\":\"请输入药品名称\",\"type\":\"text\"},domProps:{\"value\":(n.medicine)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(n, \"medicine\", $event.target.value)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"d_flex\"},[_c('span',[_vm._v(\"规格\")]),_vm._v(\" \"),_c('span',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(n.spec),expression:\"n.spec\"}],attrs:{\"autocomplete\":\"off\",\"name\":'prescriptionDetails['+index+'].spec',\"placeholder\":\"请输入药品规格\",\"type\":\"text\"},domProps:{\"value\":(n.spec)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(n, \"spec\", $event.target.value)}}})])])])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"pt_block pt_upimg\"},[_c('h3',[_vm._v(\"处方笺图片\")]),_vm._v(\" \"),_c('div',{staticClass:\"up\"},[_c('div',{staticClass:\"up_in\"},[_c('img',{attrs:{\"src\":_vm.cfjBgSrc}}),_vm._v(\" \"),_c('input',{attrs:{\"accept\":\"image/*\",\"type\":\"file\",\"name\":\"file\"},on:{\"change\":_vm.onFileChange}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUploadProgress),expression:\"isUploadProgress\"}],staticClass:\"uploadProgress\"},[_c('p',[_vm._v(\"图片上传中\")]),_vm._v(\" \"),_c('mt-spinner',{attrs:{\"type\":\"fading-circle\"}})],1)])])]),_vm._v(\" \"),_c('div',{staticClass:\"pt_block to_agreem\"},[_c('div',{staticClass:\"d_flex\"},[_vm._m(0),_vm._v(\" \"),_c('router-link',{staticClass:\"mint-cell-allow-right\",attrs:{\"to\":\"prescript/agreement\"}},[_vm._v(\"同意处方购买协议\")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"prescript_btns\"},[_c('mt-button',{attrs:{\"size\":\"small\",\"plain\":\"\"},on:{\"click\":_vm.prescriptHistory}},[_vm._v(\"查看记录\"+_vm._s(_vm.progress))]),_vm._v(\" \"),_c('mt-button',{staticClass:\"green\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.confirmCfj}},[_vm._v(\"提交处方笺\")])],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('router-view',{on:{\"changeClass\":_vm.changeClassOne}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"ischeckboxtwo\":\"\"}},[_c('input',{attrs:{\"checked\":\"\",\"id\":\"agreeLabel\",\"type\":\"checkbox\"}}),_c('i')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-00840374\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/Prescript/Prescript.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-00840374\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./Prescript.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-00840374\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=1!./Prescript.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./Prescript.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./Prescript.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-00840374\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./Prescript.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-00840374\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Prescript/Prescript.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}