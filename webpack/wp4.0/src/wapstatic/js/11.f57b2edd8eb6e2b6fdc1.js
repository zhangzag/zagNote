webpackJsonp([11],{"72tA":function(e,t){},mJTh:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("wSez"),s=o("AG0B"),a={name:"myinfo",data:function(){return{hearImg:{headImgCur:"./static/images/headimg.png",headImgL:"./static/images/headimg.png",headImgM:"./static/images/headimg-2.png"},flag:!1,isShowMore:!1,isUnscRollable:!1,backParentPage:!1,pageTitle:"用户登录",showId:"1",isDetailPage:!1,pwd:"",titles:"",phone:"",nowPage:this.$route.query.np,registerPhone:"",registerCode:"",registerText:"获取验证码",codeTime:30,timeText:"s后重新获取",codeDisabled:!1,isNext:!0,codeNum:"",registerPwd:"",registerPwd2:"",verificationSrc:"",forgerTel_1:"",forgerCode_1:"",forgerCode_2:"",forgerCode_3:"",newPwd:"",newPwd2:""}},props:[],components:{"mt-header":i.Header,"mt-button":i.Button,comHeaderTitle:s.a,"mt-popup":i.Popup},watch:{phone:function(){this.$options.methods.isClickBtn(this,2,this.pwd,this.phone)},pwd:function(){this.$options.methods.isClickBtn(this,2,this.pwd,this.phone)},registerPwd2:function(){this.$options.methods.isClickBtn(this,1,this.registerPwd2)},forgerTel_1:function(){this.$options.methods.isClickBtn(this,2,this.forgerTel_1,this.forgerCode_1)},forgerCode_1:function(){this.$options.methods.isClickBtn(this,2,this.forgerTel_1,this.forgerCode_1)},forgerCode_2:function(){this.$options.methods.isClickBtn(this,1,this.forgerCode_2)},newPwd:function(){this.$options.methods.isClickBtn(this,2,this.newPwd,this.newPwd2)},newPwd2:function(){this.$options.methods.isClickBtn(this,2,this.newPwd,this.newPwd2)}},created:function(){2==this.nowPage&&(this.pageTitle="快速注册",this.showId=2)},mounted:function(){this.$emit("changeClass",!1)},updated:function(){this.$nextTick(function(){this.backParentPage||(this.isUnscRollable=!0)})},destroyed:function(){this.$emit("changeClass",!0)},methods:{signIn:function(){var e=this;if(!/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(this.phone))return this.$options.methods.comToast("请输入正确的手机号码"),this.phone=this.pwd="",!1;this.flag||(this.flag=!0,this.$ajax({url:e.webRoot+"/login",data:{username:e.phone,password:e.pwd}}).then(function(t){var o;if(!t.data.success)return i.MessageBox.alert(t.data.msg).then(function(e){}),e.flag=!1,!1;o=t.data.memberID,e.$store.commit("add",{addMemberInfo:{memberID:t.data.memberID}}),e.$ajax({url:e.webRoot+"/vipSearchByID",data:{id:o}}).then(function(t){if(!t.data)return e.$options.methods.comToast("获取个人信息失败"),e.flag=!1,!1;e.$store.commit("add",{addMemberInfo:t.data}),setTimeout(function(){e.$router.replace({path:"/index"}),e.flag=!1},500)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}))},forgetPwd:function(e,t){var o=null;if(!/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test((t=t||this).forgerTel_1))return t.$options.methods.comToast("请输入正确的手机号码"),t.forgerTel_1=t.forgerCode_1="",!1;t.$ajax({url:t.webRoot+"/verifyCode",data:{telephone:t.forgerTel_1,code:t.forgerCode_1}}).then(function(e){if(!0!==e.data.msg)return t.$options.methods.comToast(e.data.msg),t.isNext=!0,!1;t.$options.methods.jumpPage("5",t),t.codeDisabled=!0,t.registerText=t.codeTime+t.timeText,clearInterval(o),o=setInterval(function(){t.codeTime--,t.registerText=t.codeTime+t.timeText,0==t.codeTime&&(clearInterval(o),t.registerText="获取验证码",t.codeDisabled=!1,t.codeTime=30)},1e3),t.isNext=!0}).catch(function(e){console.log(e)})},changeVerImg:function(){var e=this.verificationSrc.split("?"),t=100*Math.random();this.verificationSrc=e[0]+"?v="+t},getCodeTwo:function(e){var t=this.verificationSrc.split("?"),o=100*Math.random();this.forgerCode_1=this.forgerCode_2="",this.verificationSrc=t[0]+"?v="+o,this.$options.methods.jumpPage(4,this)},verifyMsg:function(){var e=this;this.$ajax({url:e.webRoot+"/verifyMessage",data:{telephone:e.forgerTel_1,randomCode:e.forgerCode_2}}).then(function(t){t.data.num?(e.forgerCode_3=t.data.num,e.$options.methods.jumpPage(6,e)):e.$options.methods.comToast(t.data.msg)}).catch(function(t){e.$options.methods.comToast("服务出错，"+t)})},comfireNewPwd:function(){var e=this;if(this.flag)return!1;if(this.flag=!0,this.newPwd==this.newPwd2){if(!/^[0-9A-Za-z!#$%^&*]{6,20}$/.test(this.newPwd))return e.$options.methods.comToast("请输入6~20个英文字母、数字或符号（除空格）",1500),e.flag=!1,!1;e.$ajax({url:e.webRoot+"/changePassword",data:{telephone:e.forgerTel_1,randomCodeTwo:e.forgerCode_3,password:e.newPwd}}).then(function(t){t.data?(e.$options.methods.comToast("密码修改成功！",1500),setTimeout(function(){location.reload()},1e3)):e.$options.methods.comToast(t.data.msg),e.flag=!1}).catch(function(e){console.log(e)})}else e.$options.methods.comToast("两次密码输入不正确！"),e.flag=!1},getCodeRegister:function(){var e=this,t=null;return!this.flag&&(this.flag=!0,this.registerPhone&&/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(this.registerPhone)?void this.$ajax({url:e.webRoot+"/sendMessage",data:{telephone:e.registerPhone}}).then(function(o){!0===o.data.msg?(e.codeDisabled=!0,e.registerText=e.codeTime+e.timeText,clearInterval(t),t=setInterval(function(){e.codeTime--,e.registerText=e.codeTime+e.timeText,0==e.codeTime&&(clearInterval(t),e.registerText="获取验证码",e.codeDisabled=!1,e.codeTime=30)},1e3)):e.$options.methods.comToast(o.data.msg),e.flag=!1}).catch(function(t){e.$options.methods.comToast("服务出错，"+t),e.flag=!1}):(this.$options.methods.comToast("请输入正确的手机号码"),!1))},validate:function(e){var t=this;this.registerPwd=this.registerPwd2="",this.$ajax({url:t.webRoot+"/verifyMessage",data:{telephone:t.registerPhone,randomCode:t.registerCode}}).then(function(o){if(!o.data.num)return t.$options.methods.comToast(o.data.msg),!1;t.codeNum=o.data.num,t.$options.methods.jumpPage(e,t),t.isNext=!0})},isShowNext:function(){var e=document.getElementsByName("registerAgreement")[0].checked;return this.registerCode&&e?(this.isNext=!1,!1):this.registerCode&&e?void 0:(this.isNext=!0,!1)},clickRegister:function(){var e=this;return!this.flag&&(this.flag=!0,this.registerPwd!=this.registerPwd2?(this.$options.methods.comToast("两次密码输入不正确"),this.registerPwd=this.registerPwd2="",e.flag=!1,!1):/^[0-9A-Za-z!#$%^&*]{6,20}$/.test(this.registerPwd)?void this.$ajax({url:e.webRoot+"/vipRegisterInsert",data:{telephone:e.registerPhone,randomCodeTwo:e.codeNum,password:e.registerPwd}}).then(function(t){t.data?e.$router.push({path:"/success_registre"}):e.$options.methods.comToast(t.data.msg),e.flag=!1}):(e.$options.methods.comToast("请输入6~20个英文字母、数字或符号（除空格）",1500),e.flag=!1,!1))},changeClassOne:function(e){e?(this.backParentPage=!0,this.isUnscRollable=!1):(this.backParentPage=!1,this.isUnscRollable=!0)},isClickBtn:function(e,t,o,i){e.isNext=t>=2?!o||!i:!o},jumpPage:function(e,t){var o="2"==e?"快速注册":"3"==e?"设置密码":"4"==e?"找回密码":"5"==e?"安全检测":"6"==e?"设置新密码":"用户登录";"4"==e&&(t.verificationSrc=t.webRoot+"/sendCode?v="+Math.random()),t.hearImg.headImgCur="4"==e||"5"==e||"6"==e?t.hearImg.headImgM:t.hearImg.headImgL,t.isDetailPage=!0,t.pageTitle=o,t.showId=e},comToast:function(e,t){t=t||2e3;Object(i.Toast)({message:e,position:"center",duration:t})},goBack:function(){if(this.isDetailPage)return this.showId=2==this.nowPage?"2":"1",this.isDetailPage=!1,this.pageTitle=2==this.nowPage?"快速注册":"用户登录",this.hearImg.headImgCur=this.hearImg.headImgL,this.$options.methods.clearData(this),!1;this.$router.go(-1)},showMore:function(){this.isShowMore=!0},clearData:function(e){e.flag=!1,e.isUnscRollable=!1,e.backParentPage=!1,e.pageTitle="用户登录",e.showId="1",e.isDetailPage=!1,e.pwd="",e.titles="",e.phone="",e.nowPage=e.$route.query.np,e.registerPhone="",e.registerCode="",e.registerText="获取验证码",e.codeTime=30,e.timeText="s后重新获取",e.codeDisabled=!1,e.isNext=!0,e.codeNum="",e.registerPwd="",e.registerPwd2="",e.verificationSrc="",e.forgerTel_1="",e.forgerCode_1="",e.forgerCode_2="",e.forgerCode_3="",e.newPwd="",e.newPwd2=""}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"wrap login_wrap"},[o("section",{staticClass:"wrap_in",class:{unscrollable:e.isUnscRollable}},[o("div",{staticClass:"header"},[o("mt-header",{attrs:{fixed:"",title:e.titles}},[o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(t){return t.preventDefault(),e.goBack(t)}},slot:"left"}),e._v(" "),o("mt-button",{attrs:{slot:"right",icon:"more"},on:{click:function(t){return t.preventDefault(),e.showMore(t)}},slot:"right"})],1)],1),e._v(" "),o("mt-popup",{staticClass:"more_block",attrs:{position:"top"},model:{value:e.isShowMore,callback:function(t){e.isShowMore=t},expression:"isShowMore"}},[o("router-link",{attrs:{to:"/index"}},[e._v("首页")]),e._v(" "),o("router-link",{attrs:{to:"/sort"}},[e._v("分类")]),e._v(" "),o("router-link",{attrs:{to:"/myinfo"}},[e._v("个人中心")])],1),e._v(" "),o("div",{staticClass:"login_bg"},[o("div",{staticClass:"headimg"},[o("img",{attrs:{src:e.hearImg.headImgCur}})]),e._v(" "),o("p",[e._v(e._s(e.pageTitle))])]),e._v(" "),o("div",{staticClass:"form_info"},[e._m(0),e._v(" "),o("input",{staticStyle:{width:"0",height:"0",visibility:"hidden"},attrs:{type:"password"}}),e._v(" "),"1"==e.showId?o("div",{staticClass:"user_login"},[o("div",{staticClass:"form"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{autocomplete:"off",type:"text",placeholder:"请输入手机号码"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{autocomplete:"off",type:"password",placeholder:"请输入密码"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}})]),e._v(" "),o("button",{attrs:{disabled:e.isNext},on:{click:e.signIn}},[e._v("登录")])]),e._v(" "),o("div",{staticClass:"links d_flex"},[o("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.jumpPage("4",e._self)}}},[e._v("忘记密码?")]),e._v(" "),o("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.jumpPage("2",e._self)}}},[e._v("新用户注册")])])]):e._e(),e._v(" "),"2"==e.showId?o("div",{staticClass:"user_register"},[o("div",{staticClass:"form"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPhone,expression:"registerPhone"}],attrs:{autocomplete:"off",type:"text",placeholder:"请输入手机号码"},domProps:{value:e.registerPhone},on:{input:function(t){t.target.composing||(e.registerPhone=t.target.value)}}})]),e._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.registerCode,expression:"registerCode"}],attrs:{autocomplete:"off",type:"text",placeholder:"请输入验证码"},domProps:{value:e.registerCode},on:{keyup:e.isShowNext,input:function(t){t.target.composing||(e.registerCode=t.target.value)}}}),e._v(" "),o("button",{attrs:{disabled:e.codeDisabled},on:{click:e.getCodeRegister}},[o("i",{staticClass:"c_green"},[e._v(e._s(e.registerText))])])]),e._v(" "),o("button",{attrs:{disabled:e.isNext},on:{click:function(t){e.validate("3")}}},[e._v("下一步")])]),e._v(" "),o("label",{attrs:{ischeckboxtwo:""}},[o("input",{attrs:{autocomplete:"off",name:"registerAgreement",type:"checkbox",checked:""},on:{click:e.isShowNext}}),e._v(" "),o("i"),e._v(" "),o("span",[e._v("我已阅读并同意"),o("router-link",{attrs:{to:"/login_agreement"}},[e._v("《网站服务协议》")])],1)])]):e._e(),e._v(" "),"3"==e.showId?o("div",{staticClass:"user_login"},[o("div",{staticClass:"form"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPwd,expression:"registerPwd"}],attrs:{autocomplete:"off",type:"password",placeholder:"请输入密码"},domProps:{value:e.registerPwd},on:{input:function(t){t.target.composing||(e.registerPwd=t.target.value)}}})]),e._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPwd2,expression:"registerPwd2"}],attrs:{autocomplete:"off",type:"password",placeholder:"请输入密码确认"},domProps:{value:e.registerPwd2},on:{input:function(t){t.target.composing||(e.registerPwd2=t.target.value)}}})]),e._v(" "),o("button",{attrs:{disabled:e.isNext},on:{click:e.clickRegister}},[e._v("确定")])])]):e._e(),e._v(" "),"4"==e.showId?o("div",{staticClass:"forger_step_1"},[o("div",{staticClass:"form"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.forgerTel_1,expression:"forgerTel_1"}],attrs:{autocomplete:"off",type:"text",placeholder:"请输入手机号码"},domProps:{value:e.forgerTel_1},on:{input:function(t){t.target.composing||(e.forgerTel_1=t.target.value)}}})]),e._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.forgerCode_1,expression:"forgerCode_1"}],attrs:{autocomplete:"off",type:"text",placeholder:"请输入验证码"},domProps:{value:e.forgerCode_1},on:{input:function(t){t.target.composing||(e.forgerCode_1=t.target.value)}}}),e._v(" "),o("span",[o("img",{staticClass:"ver_img",attrs:{src:e.verificationSrc},on:{click:e.changeVerImg}})])]),e._v(" "),o("button",{attrs:{disabled:e.isNext},on:{click:e.forgetPwd}},[e._v("下一步")])])]):e._e(),e._v(" "),"5"==e.showId?o("div",{staticClass:"forger_step_2"},[o("div",{staticClass:"form"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.forgerCode_2,expression:"forgerCode_2"}],attrs:{autocomplete:"off",type:"text",placeholder:"请输入短信验证码"},domProps:{value:e.forgerCode_2},on:{input:function(t){t.target.composing||(e.forgerCode_2=t.target.value)}}}),e._v(" "),o("span",{attrs:{disabled:e.codeDisabled},on:{click:e.getCodeTwo}},[o("i",{staticClass:"c_green"},[e._v(e._s(e.registerText))])])]),e._v(" "),o("button",{attrs:{disabled:e.isNext},on:{click:e.verifyMsg}},[e._v("下一步")]),e._v(" "),o("p",[e._v("为保证您账户的安全,我们已发送了校验码到您的手机"),o("span",[e._v(e._s(e.forgerTel_1))])])])]):e._e(),e._v(" "),"6"==e.showId?o("div",{staticClass:"forger_step_3"},[o("div",{staticClass:"form"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.newPwd,expression:"newPwd"}],attrs:{autocomplete:"off",type:"password",placeholder:"请输入新密码"},domProps:{value:e.newPwd},on:{input:function(t){t.target.composing||(e.newPwd=t.target.value)}}})]),e._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.newPwd2,expression:"newPwd2"}],attrs:{autocomplete:"off",type:"password",placeholder:"请确认新密码"},domProps:{value:e.newPwd2},on:{input:function(t){t.target.composing||(e.newPwd2=t.target.value)}}})]),e._v(" "),o("button",{attrs:{disabled:e.isNext},on:{click:e.comfireNewPwd}},[e._v("确定")]),e._v(" "),o("p",[e._v("请输入6~20个英文字母、数字或符号（除空格）")])])]):e._e()])],1),e._v(" "),o("transition",{attrs:{name:"fade"}},[o("router-view",{on:{changeClass:e.changeClassOne}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("form",{staticStyle:{display:"none"}},[t("input",{attrs:{type:"password"}})])}]};var n=o("vSla")(a,r,!1,function(e){o("n6+/"),o("72tA")},"data-v-207269dd",null);t.default=n.exports},"n6+/":function(e,t){}});
//# sourceMappingURL=11.f57b2edd8eb6e2b6fdc1.js.map