webpackJsonp([1],{"0":function(e,t,n){n(1),e.exports=n(482)},"482":function(e,t,n){"use strict";n(483),n(485),n(487),n(489);var s=n(337).webRoot,o=n(491),i=o.verifyPhone,r=o.verifyPwd,c=n(480),l=c.verifyCodeApi,a=c.verifyMessageApi,p=c.changePasswordApi;$(".header-mc .h-title").text("找回密码"),$(function(){function e(e){$("#getPhoneCode").html(e+"s后重新获取").attr({"disabled":"disabled"}),clearInterval(d),d=setInterval(function(){e--,$("#getPhoneCode").html(e+"s后重新获取"),e<=0&&(clearInterval(d),$("#getPhoneCode").html("重新获取验证码").attr({"disabled":!1}),$(".steps").step("previous"),o--,$(".forget").eq(o).css({"display":"block"}).siblings().css({"display":"none"}))},1e3)}function t(){$(".picBtn img").attr("src",s+"/sendCode?n="+Math.random())}function n(e,t){var n=$(e);n.html(t),n.show()}var o=0,c=6;!function(){$(".steps").step({"stepNames":["安全验证","短信验证码","设置新密码","设置完成"],"initStep":1})}(),t(),$(".picBtn").click(function(){t()});var f=null;$("#nextStep").click(function(){var s=$.trim($("#userPhone").val()),d=$.trim($("#picCode").val()),u=$.trim($("#phoneCode").val()),h=$.trim($("#userPsw").val()),m=$.trim($("#repeatPsw").val());switch(o){case 0:if(!i(s))return n("#phoneErr","请输入正确的手机号!"),!1;if(!d)return n("#picErr","请输入验证码!"),!1;$("#phoneErr").html("").css({"display":"none"}),l({"telephone":s,"code":d}).then(function(s){if(!0!==s.msg)return n("#picErr",s.msg),t(),!1;$(".steps").step("next"),o++,$(".forget").eq(o).css({"display":"block"}).siblings().css({"display":"none"}),e(120)})["catch"](function(e){console.log("验证图形验证码出错,",e)});break;case 1:a({"telephone":s,"randomCode":u}).then(function(e){e.num?(f=e.num,$(".steps").step("next"),o++,$(".forget").eq(o).css({"display":"block"}).siblings().css({"display":"none"})):(n("#picErr","短信验证码错误，请重新获取!"),$(".steps").step("previous"),o--,$(".forget").eq(o).css({"display":"block"}).siblings().css({"display":"none"}))})["catch"](function(e){console.log("短信验证出错,",e)});break;case 2:if(!r(h))return n("#pswTip","密码为6-16位数字、字母或者符号!"),!1;if(h!==m)return n("#repeatPswTip","两次输入密码不一致，请再次输入密码!"),!1;$("#repeatPswTip").html("").css({"display":"none"}),p({"telephone":s,"randomCodeTwo":f,"password":h}).then(function(e){if(101==e.code)return n("#pswTip","您设置的密码与原密码相同，请重新设置!"),!1;$(".steps").step("next"),o++,$(".forget").eq(o).css({"display":"block"}).siblings().css({"display":"none"}),$(".fotget-ok .se span").eq(0).html(c),$("#nextStep").eq(0).html("返回首页"),setInterval(function(){c--,$(".fotget-ok .se span").eq(0).html(c),c<0&&(window.location.href="index.html")},1e3)})["catch"](function(e){console.log("更改密码出错,",e)});break;default:window.location.href="index.html"}});var d=null})},"483":function(e,t){},"485":function(e,t){},"487":function(e,t){},"489":function(e,t){},"491":function(e,t){"use strict";function n(e){return/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(e)}function s(e){return/^[0-9A-Za-z!#$%^&*]{6,20}$/.test(e)}t.verifyPhone=n,t.verifyPwd=s,Object.defineProperty(t,"__esModule",{"value":!0})}});