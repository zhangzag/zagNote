webpackJsonp([1],{"0":function(e,n,t){t(1),e.exports=t(481)},"481":function(e,n,t){"use strict";t(482),t(484),t(486),t(488);var o=t(337).webRoot,s=t(490),i=s.verifyPhone,r=s.verifyPwd,c=t(491),a=c.verifyCodeApi,l=c.verifyMessageApi,p=c.changePasswordApi;$(".header-mc .h-title").text("找回密码"),$(function(){function e(e){$("#getPhoneCode").html(e+"s后重新获取").attr({"disabled":"disabled"}),clearInterval(d),d=setInterval(function(){e--,$("#getPhoneCode").html(e+"s后重新获取"),e<=0&&(clearInterval(d),$("#getPhoneCode").html("重新获取验证码").attr({"disabled":!1}),$(".steps").step("previous"),s--,$(".forget").eq(s).css({"display":"block"}).siblings().css({"display":"none"}))},1e3)}function n(){$(".picBtn img").attr("src",o+"/sendCode?n="+Math.random())}function t(e,n){var t=$(e);t.html(n),t.show()}var s=0,c=6;!function(){$(".steps").step({"stepNames":["安全验证","短信验证码","设置新密码","设置完成"],"initStep":1})}(),n(),$(".picBtn").click(function(){n()});var u=null;$("#nextStep").click(function(){var o=$.trim($("#userPhone").val()),d=$.trim($("#picCode").val()),f=$.trim($("#phoneCode").val()),h=$.trim($("#userPsw").val()),m=$.trim($("#repeatPsw").val());switch(s){case 0:if(!i(o))return t("#phoneErr","请输入正确的手机号!"),!1;if(!d)return t("#picErr","请输入验证码!"),!1;$("#phoneErr").html("").css({"display":"none"}),a({"telephone":o,"code":d}).then(function(o){if(!0!==o.msg)return t("#picErr",o.msg),n(),!1;$(".steps").step("next"),s++,$(".forget").eq(s).css({"display":"block"}).siblings().css({"display":"none"}),e(120)})["catch"](function(e){console.log("验证图形验证码出错,",e)});break;case 1:l({"telephone":o,"randomCode":f}).then(function(e){e.num?(u=e.num,$(".steps").step("next"),s++,$(".forget").eq(s).css({"display":"block"}).siblings().css({"display":"none"})):(t("#picErr","短信验证码错误，请重新获取!"),$(".steps").step("previous"),s--,$(".forget").eq(s).css({"display":"block"}).siblings().css({"display":"none"}))})["catch"](function(e){console.log("短信验证出错,",e)});break;case 2:if(!r(h))return t("#pswTip","密码为6-16位数字、字母或者符号!"),!1;if(h!==m)return t("#repeatPswTip","两次输入密码不一致，请再次输入密码!"),!1;$("#repeatPswTip").html("").css({"display":"none"}),p({"telephone":o,"randomCodeTwo":u,"password":h}).then(function(e){if(101==e.code)return t("#pswTip","您设置的密码与原密码相同，请重新设置!"),!1;$(".steps").step("next"),s++,$(".forget").eq(s).css({"display":"block"}).siblings().css({"display":"none"}),$(".fotget-ok .se span").eq(0).html(c),$("#nextStep").eq(0).html("返回首页"),setInterval(function(){c--,$(".fotget-ok .se span").eq(0).html(c),c<0&&(window.location.href="index.html")},1e3)})["catch"](function(e){console.log("更改密码出错,",e)});break;default:window.location.href="index.html"}});var d=null})},"482":function(e,n){},"484":function(e,n){},"486":function(e,n){},"488":function(e,n){},"490":function(e,n){"use strict";function t(e){return/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(e)}function o(e){return/^[0-9A-Za-z!#$%^&*]{6,20}$/.test(e)}n.verifyPhone=t,n.verifyPwd=o,Object.defineProperty(n,"__esModule",{"value":!0})},"491":function(e,n,t){"use strict";function o(e){var n=e.username,t=e.password;return new Promise(function(e,o){n&&t||o("未输入账号或密码"),a({"url":c+"/login","data":{"username":n,"password":t}}).then(function(n){e(n)})["catch"](function(e){o(e)})})}function s(e){var n=e.telephone,t=e.code;return new Promise(function(e,o){n&&t||o("参数不齐"),a({"url":c+"/verifyCode","data":{"telephone":n,"code":t},"xhrFields":{"withCredentials":!0},"crossDomain":!0}).then(function(n){e(n)})["catch"](function(e){o(e)})})}function i(e){var n=e.telephone,t=e.randomCode;return new Promise(function(e,o){n&&t||o("参数不齐"),a({"url":c+"/verifyMessage","data":{"telephone":n,"randomCode":t}}).then(function(n){e(n)})["catch"](function(e){o(e)})})}function r(e){var n=e.telephone,t=e.randomCodeTwo,o=e.password;return new Promise(function(e,s){n&&t&&o||s("参数不齐"),a({"url":c+"/changePassword","data":{"telephone":n,"randomCodeTwo":t,"password":o}}).then(function(n){e(n)})["catch"](function(e){s(e)})})}n.login=o,n.verifyCodeApi=s,n.verifyMessageApi=i,n.changePasswordApi=r,Object.defineProperty(n,"__esModule",{"value":!0});var c=t(337).webRoot,a=t(473)._req}});