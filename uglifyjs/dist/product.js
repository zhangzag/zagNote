function i(t,a){layui.t("layer",function(){layer.a(t,{r:a,n:1e3})})}function t(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),r=window.i.search.substr(1).match(a);return null!=r?decodeURI(r[2]):null}function n(t){t.u,t.e}$(function(){$.c().p,t("ser_con");lazyLoad({o:"/images/ak_300x300.jpg"});var c=t("productTypeOne"),o=t("productTypeTwo"),d=t("productName"),r=window.i.d;r=-1==r.indexOf(".ak1ak1.com")?"":".ak1ak1.com";$(".list-shou").s(function(){"收起"==$(this).$("span").l()?($(this).$("span").l("展开").y().m("layui-icon-down").b("layui-icon-up"),$(this).g().h({f:"42px",v:"hidden"})):($(this).$("span").l("收起").y().m("layui-icon-up").b("layui-icon-down"),$(this).g().h({f:"200px",v:"hidden"}),$(this).w().h({f:"200px",v:"auto"}))}),$(".tab-card .sortType").s(function(){$(this).m("active").N().b("active")});var s=null;function l(i,u){layui.t("layer",function(){var t=layui.x;s=t.I(2)});var t=$(".tab-card .input-w input").T(0).k(),a=$(".tab-card .input-w input").T(1).k(),r=$(".pro-type .productDrugType").find(".productDrugActive").l(),n=$(".pro-type .brandList").find(".brandActive").A("brandId"),e=$.trim($("#productName").k()),p={B:i,C:20,P:null==(e=e||null)?d:e,D:null,L:r=r||null,R:n=n||null,S:t=t||null,_:a=a||null,j:c,q:o,O:"wap"};$.z({M:$.c().p+"/product/getProductList",G:"POST",J:"json",U:p,F:function(t){if($(".crumbs-bar .cru-s p span").l(t.H),$(".tab-card .page .tabCount").l(Math.ceil(t.H/20)),$(".pro-wrap").l(""),t.U,t.U.length<=0)layui.t("layer",function(){layui.x.K(s)}),$(".pro-wrap").l("<h5>没有更多数据了！</h5>");else{for(var a="",r=0;r<t.U.length;r++){var n=null;n=1==t.U[r].Q?'<button class="demandBtn">需求登记</button>':'<button class="buyBtn">立即购买</button>',a+='<div class="item" productIndex="'+r+'" productId="'+t.U[r].V+'"><a target="_blank" class="product-info" href="/products/'+t.U[r].W+'.html"><img class="lazy" data-original="'+(t.U[r].X?t.U[r].X:"")+'" alt="'+t.U[r].P+'" title="'+t.U[r].P+'"><p><i class="'+$.Y(t.U[r].Q)+'"></i>'+t.U[r].P+'</p></a><div class="buy"><div class="pri"><span class="buy-pri">'+$.Z(t.U[r].tt)+'</span><span class="old-pri">'+$.Z(t.U[r].at)+'</span></div><div class="num-wrap"><span class="reduce"></span><input class="num" value="1" maxStore="'+t.U[r].rt+'"/><span class="add"></span></div></div>'+n+"</div>"}$(".pro-wrap").l(a)}layui.t("layer",function(){layui.x.K(s)}),lazyLoad({o:"/static/images/ak_300x300.jpg"}),(i<=1||u)&&layui.t("laypage",function(){layui.it.nt({ut:"page",H:t.H,C:20,et:i,pt:["page","prev","next"],ct:"#a7a7a7",ot:function(t,a){$(".tab-card .page .tabCurr").l(t.et),a||l(t.et)}})})}})}if(0<$(".pro-wrap .item").length){$(".pro-wrap .item");layui.t("laypage",function(){layui.it.nt({ut:"page",H:$("#prosCount").A("data-count")||0,C:20,et:1,pt:["page","prev","next"],ct:"#a7a7a7",ot:function(t,a){$(".tab-card .page .tabCurr").l(t.et),a||l(t.et)}})})}$(".pro-wrap").dt("click",".reduce",function(){var t=Number($(this).y().k());if(!/^[0-9]*$/.test(t))return i("请输入数字",2),$(this).y().k(1),!1;t=--t<=1?1:t,$(this).y().k(t)}),$(".pro-wrap").dt("click",".add",function(){var t=Number($(this).w().k());if(!/^[0-9]*$/.test(t))return i("请输入数字",2),$(this).w().k(1),!1;t++,$(this).w().k(t)}),$(".pro-type .brandList").dt("click","a",function(){$(".crumbs").find(".crumbBrand").st(),$(".crumbs").lt('<span class="crumbBrand" brandId="'+$(this).A("brandId")+'">'+$(this).l()+"</span>"),$(this).m("brandActive").g().N().find("a").b("brandActive"),l(1)}),$(".pro-type .productDrugType").dt("click","a",function(){$(this).m("productDrugActive").g().N().find("a").b("productDrugActive");$(this).l(),$(".pro-type .brandList").find(".brandActive").A("brandId");l(1)}),$(".priAlert input").s(function(){$(this).g().g().m("pri").$(".pri-btn").h({$t:"block"})}),$(".priAlert .pri-ok").s(function(){var t=$(".tab-card .input-w input").T(0).k(),a=$(".tab-card .input-w input").T(1).k();if(Number(t)>Number(a))layui.t("layer",function(){layer.a("请填写正确的价格区间",{r:2})});else{$(this).g().h({$t:"none"}).g().b("pri");var r=$(".pro-type .productDrugType").find(".productDrugActive").l(),n=$(".pro-type .brandList").find(".brandActive").A("brandId");r=r||null,n=n||null,l(1)}}),$(".priAlert .pri-cle").s(function(){$(this).g().h({$t:"none"}).N(".input-w").$("input").k("").g().g().b("pri"),l(1)}),$("#searchBtn").s(function(){$.trim($("#productName").k()),$(".crumbs .crumbBrand").A("brandId")&&$(".crumbs .crumbBrand").A("brandId");l(1)});$("#tabPageNext").s(function(){var t=Number($(".tab-card .page .tabCurr").l()),a=Number($(".tab-card .page .tabCount").l());t=a<++t?a:t,$(".tab-card .page .tabCurr").l(t),l(t,"tabPage")}),$("#tabPagePrev").s(function(){var t=Number($(".tab-card .page .tabCurr").l());Number($(".tab-card .page .tabCount").l());t=--t<1?1:t,$(".tab-card .page .tabCurr").l(t),l(t,"tabPage")}),$(".demandBtn").s(function(){var t=$(this).A("data-proNum")||"";if(t||0==t){var r=$.trim($(this).N(".buy").find(".num-wrap .num").k());/^[0-9]*$/.test(r)||(r=1),$(this).N(".buy").find(".num-wrap .num").k(r),$.z({M:$.c().p+"/product/findProductByProductNumber",U:{W:t}}).bt(function(t){if(null==t.U)return i(t.a,2),!1;var a=t.U;$.mt({yt:1,ht:a,gt:r,ft:n})})}else i("获取商品信息失败",2)});$(".pro-wrap").dt("click",".buyBtn",function(){var t=$.trim($(this).w().find(".num-wrap .num").k()),a=$(this).g().A("productId");return/^[0-9]*$/.test(t)?function n(){for(var t=document.vt.split("; "),a=0;a<t.length;a++){var r=t[a].split("=");if("memberId"==r[0]&&"null"!=r[1])return unescape(r[1])}}()?(gtag("event","点击立即购买",{wt:"商品id："+a}),window.i.Nt="/submitOrder.html",void $.vt("order",JSON.xt({It:1,kt:a,gt:Number(t)}),{yt:"/",Tt:r})):($.At(),!1):(i("请输入数字",2),$(this).w().find(".num-wrap .num").k(1),!1)});$("#loginShow").s(function(){if($.c().Bt)return!1;var t={};t.Ct=getdefault,$.At(t)})}),Date.prototype.Pt=function(t){var a={Dt:this.getMonth()+1,Lt:this.getDate(),Rt:this.getHours(),St:this.getMinutes(),_t:this.getSeconds(),Et:Math.floor((this.getMonth()+3)/3),jt:this.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t};